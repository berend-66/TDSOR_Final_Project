
. 
. !date

Sat Apr 13 19:27:42 CEST 2024

. 
. set more off

. * set mem 50m

. 
. import excel "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechniq
> ue/1. M2/2. S2/Econometrics Project/2. Results/Clean data/db_clean.xlsx", firstrow
>  clear
file /Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2.
S2/Econometrics Project/2. Results/Clean data/db_clean.xlsx not found
r(601);

. drop date
variable date not found
r(111);

. save "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2
> /2. S2/Econometrics Project/2. Results/Clean data/db_clean.dta", replace
(file /Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1.
    M2/2. S2/Econometrics Project/2. Results/Clean data/db_clean.dta not found)
file /Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1.
    M2/2. S2/Econometrics Project/2. Results/Clean data/db_clean.dta could not be
    opened
r(603);

. use "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/
> 2. S2/Econometrics Project/2. Results/Clean data/db_clean.dta", clear
file /Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1.
    M2/2. S2/Econometrics Project/2. Results/Clean data/db_clean.dta not found
r(601);

. 
. ***********************************************

. *  Do principal components on eleven variables  *

. ***********************************************

. 
. pca mp1 mp2 mp3 ed1change change3m change6m change12m change3y change5y change10y 
> ndx
(obs=127)
(principal components; 11 components retained)

Component    Eigenvalue     Difference    Proportion    Cumulative
------------------------------------------------------------------
     1        3.20517         1.47380      0.2914         0.2914
     2        1.73138         0.12025      0.1574         0.4488
     3        1.61112         0.46587      0.1465         0.5952
     4        1.14525         0.25379      0.1041         0.6994
     5        0.89146         0.11926      0.0810         0.7804
     6        0.77220         0.12672      0.0702         0.8506
     7        0.64548         0.14822      0.0587         0.9093
     8        0.49726         0.08288      0.0452         0.9545
     9        0.41438         0.33546      0.0377         0.9922
    10        0.07892         0.07154      0.0072         0.9993
    11        0.00738               .      0.0007         1.0000

               Eigenvectors
    Variable |      1          2          3          4          5          6
-------------+-----------------------------------------------------------------
         mp1 |   0.01486   -0.32643    0.42281    0.16606   -0.64060    0.14709
         mp2 |  -0.05564    0.41793   -0.53651    0.02727   -0.00799    0.07182
         mp3 |   0.02948   -0.23867    0.38960   -0.49975    0.51874   -0.18340
   ed1change |  -0.18470   -0.20270    0.07610    0.62860    0.27368    0.20474
    change3m |  -0.06030    0.47494    0.38103    0.22026    0.03561   -0.27747
    change6m |  -0.05771    0.48084    0.38311    0.18943    0.01218   -0.27934
   change12m |   0.19449    0.29784    0.27166   -0.06643    0.23052    0.83072
    change3y |   0.53245    0.09136    0.01459   -0.02143   -0.08732    0.03832
    change5y |   0.54583    0.01405   -0.01523    0.05659   -0.04471   -0.10845
   change10y |   0.53607   -0.00657   -0.03935    0.07990   -0.03697   -0.15655
         ndx |   0.21933   -0.25819   -0.08975    0.47743    0.42431   -0.12161

               Eigenvectors
    Variable |      7          8          9         10         11
-------------+------------------------------------------------------
         mp1 |  -0.17486    0.01100    0.47343   -0.00463    0.00477
         mp2 |   0.00127    0.03365    0.72608    0.00915    0.00535
         mp3 |   0.13018    0.02279    0.46838    0.02677    0.01856
   ed1change |   0.62497    0.04247    0.11425    0.03393    0.02137
    change3m |  -0.01798   -0.70368    0.05595   -0.00774   -0.01222
    change6m |  -0.06012    0.70712   -0.01054    0.02420    0.01718
   change12m |  -0.17095   -0.00133   -0.03058   -0.14639   -0.02053
    change3y |   0.18541   -0.02196   -0.01602    0.75386    0.30818
    change5y |   0.19046    0.02569    0.03627   -0.10441   -0.79720
   change10y |   0.15786    0.00947    0.03116   -0.62054    0.51743
         ndx |  -0.65814    0.00047    0.09759    0.10811    0.00702

. 
. gen eigenvalue = .
variable eigenvalue already defined
r(110);

. quietly forval j = 1/11 {
.    replace eigenvalue = el(e(Ev), 1, `j') in `j'
. }
type mismatch
r(109);

. 
. summarize eigenvalue, meanonly

. 
. quietly gen percent_var_exp = 100 * eigenvalue / r(sum)

. 
. list eigenvalue percent_var_exp in 1/11

     +---------------------+
     | eigenv~e   percen~p |
     |---------------------|
  1. |        .          . |
  2. |        .          . |
  3. |        .          . |
  4. |        .          . |
  5. |        .          . |
     |---------------------|
  6. |        .          . |
  7. |        .          . |
  8. |        .          . |
  9. |        .          . |
 10. |        .          . |
     |---------------------|
 11. |        .          . |
     +---------------------+

. 
. *Keep the first two factors, f1 and f2

. score f1 f2
variable f1 already defined
r(110);

. 
. * Do the rotation

. 
. matrix evec = get(Ld)

. scalar a1=evec[1,1]/(evec[1,1]+evec[1,2])

. scalar a2=evec[1,2]/(evec[1,1]+evec[1,2])

. 
. sum f1

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f1 |        127   -5.46e-09    1.790299  -3.663735   16.13608

. scalar vf1=r(sd)^2

. sum f2

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f2 |        127    2.43e-09    1.315818  -3.807915   5.127779

. scalar vf2=r(sd)^2

. 
. scalar b1=-1*a2*vf2/(a1*vf1-a2*vf2)

. scalar b2=a1*vf1/(a1*vf1-a2*vf2)

. 
. 
. *Display weights

. 
. disp a1 a2 b1 b2
-.047694231.0476942.92227651.07772349

. 
. 
. *Generate rotated factors

. 
. gen transfact1=a1*f1+a2*f2
variable transfact1 already defined
r(110);

. gen transfact2=b1*f1+b2*f2
variable transfact2 already defined
r(110);

. 
. *Normalize factors so that transfact1 has coefficient 1 on mp1tight IN SAMPLE

. 
. reg mp1tight transfact1 if change2ytight~=.
change2ytight not found
r(111);

. replace transfact1=transfact1*_b[transfact1]
_b not allowed when e(b) is not present
r(111);

. 
. *and transfact2 moves ed4 as much as transfact1 does

. 
. reg ed4tightchange transfact1 transfact2 if change2ytight~=.
change2ytight not found
r(111);

. replace transfact2=transfact2*_b[transfact2]/_b[transfact1]
_b not allowed when e(b) is not present
r(111);

. 
. 
. 
. 
. ***************************************************

. *     Provide labels for outreg                   *

. ****************************************************

. 
. 
. label var mp1 "MP1"

. label var mp2 "MP2"

. label var mp3 "MP3"

. label var ed1change "ED1"

. label var change3m "3Mth"

. label var change6m "6Mth"

. label var change12m "12Mth"

. label var change3y "3Yr"

. label var change5y "5Yr"

. label var change10y "10Yr"

. label var sp "S&P500"

. label var ndx "NASDAQ"

. label var dji "DJIA"

. 
. 
. ****************************

. * Run regressions          *

. * Robust standard errors   *

. ****************************

. 
. 
. reg mp1tight transfact1 if change2ytight~=., r 
change2ytight not found
r(111);

. outreg using factors_fulls_jan262005, replace coefastr se 3aster 
command outreg is unrecognized
r(199);

. reg mp1tight transfact1 transfact2 if change2ytight~=., r 
change2ytight not found
r(111);

. outreg using factors_fulls_jan262005, append coefastr se 3aster 
command outreg is unrecognized
r(199);

. 
. 
. 
. 
. 
. 
. foreach var of varlist mp2tight-changefwdt {
  2. 
. reg `var' transfact1 if change2ytight~=., r 
  3. outreg using factors_fulls_jan262005, append coefastr se 3aster 
  4. reg `var' transfact1 transfact2 if change2ytight~=., r 
  5. outreg using factors_fulls_jan262005, append coefastr se 3aster 
  6. }
variable mp2tight not found
r(111);

. 
. reg spchangetight transfact1, r 
variable spchangetight not found
r(111);

. outreg using factors_fulls_jan262005, append coefastr se 3aster 
command outreg is unrecognized
r(199);

. reg spchangetight transfact1 transfact2, r 
variable spchangetight not found
r(111);

. outreg using factors_fulls_jan262005, append coefastr se 3aster 
command outreg is unrecognized
r(199);

. 
. cls

. *version 8

. *capture log close

. *capture log using gss3_revised_feb012005.log, t replace

. 
. *!date

. 
. *set more off

. * set mem 50m

. 
. import excel "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechniq
> ue/1. M2/2. S2/Econometrics Project/2. Results/Clean data/db_clean.xlsx", firstrow
>  clear
file /Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2.
S2/Econometrics Project/2. Results/Clean data/db_clean.xlsx not found
r(601);

. drop date
variable date not found
r(111);

. save "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2
> /2. S2/Econometrics Project/2. Results/Clean data/db_clean.dta", replace
(file /Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1.
    M2/2. S2/Econometrics Project/2. Results/Clean data/db_clean.dta not found)
file /Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1.
    M2/2. S2/Econometrics Project/2. Results/Clean data/db_clean.dta could not be
    opened
r(603);

. use "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/
> 2. S2/Econometrics Project/2. Results/Clean data/db_clean.dta", clear
file /Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1.
    M2/2. S2/Econometrics Project/2. Results/Clean data/db_clean.dta not found
r(601);

. 
. ***********************************************

. *  Do principal components on eleven variables  *

. ***********************************************

. 
. pca mp1 mp2 mp3 ed1change change3m change6m change12m change3y change5y change10y 
> ndx
(obs=127)
(principal components; 11 components retained)

Component    Eigenvalue     Difference    Proportion    Cumulative
------------------------------------------------------------------
     1        3.20517         1.47380      0.2914         0.2914
     2        1.73138         0.12025      0.1574         0.4488
     3        1.61112         0.46587      0.1465         0.5952
     4        1.14525         0.25379      0.1041         0.6994
     5        0.89146         0.11926      0.0810         0.7804
     6        0.77220         0.12672      0.0702         0.8506
     7        0.64548         0.14822      0.0587         0.9093
     8        0.49726         0.08288      0.0452         0.9545
     9        0.41438         0.33546      0.0377         0.9922
    10        0.07892         0.07154      0.0072         0.9993
    11        0.00738               .      0.0007         1.0000

               Eigenvectors
    Variable |      1          2          3          4          5          6
-------------+-----------------------------------------------------------------
         mp1 |   0.01486   -0.32643    0.42281    0.16606   -0.64060    0.14709
         mp2 |  -0.05564    0.41793   -0.53651    0.02727   -0.00799    0.07182
         mp3 |   0.02948   -0.23867    0.38960   -0.49975    0.51874   -0.18340
   ed1change |  -0.18470   -0.20270    0.07610    0.62860    0.27368    0.20474
    change3m |  -0.06030    0.47494    0.38103    0.22026    0.03561   -0.27747
    change6m |  -0.05771    0.48084    0.38311    0.18943    0.01218   -0.27934
   change12m |   0.19449    0.29784    0.27166   -0.06643    0.23052    0.83072
    change3y |   0.53245    0.09136    0.01459   -0.02143   -0.08732    0.03832
    change5y |   0.54583    0.01405   -0.01523    0.05659   -0.04471   -0.10845
   change10y |   0.53607   -0.00657   -0.03935    0.07990   -0.03697   -0.15655
         ndx |   0.21933   -0.25819   -0.08975    0.47743    0.42431   -0.12161

               Eigenvectors
    Variable |      7          8          9         10         11
-------------+------------------------------------------------------
         mp1 |  -0.17486    0.01100    0.47343   -0.00463    0.00477
         mp2 |   0.00127    0.03365    0.72608    0.00915    0.00535
         mp3 |   0.13018    0.02279    0.46838    0.02677    0.01856
   ed1change |   0.62497    0.04247    0.11425    0.03393    0.02137
    change3m |  -0.01798   -0.70368    0.05595   -0.00774   -0.01222
    change6m |  -0.06012    0.70712   -0.01054    0.02420    0.01718
   change12m |  -0.17095   -0.00133   -0.03058   -0.14639   -0.02053
    change3y |   0.18541   -0.02196   -0.01602    0.75386    0.30818
    change5y |   0.19046    0.02569    0.03627   -0.10441   -0.79720
   change10y |   0.15786    0.00947    0.03116   -0.62054    0.51743
         ndx |  -0.65814    0.00047    0.09759    0.10811    0.00702

. 
. gen eigenvalue = .
variable eigenvalue already defined
r(110);

. quietly forval j = 1/11 {
.    replace eigenvalue = el(e(Ev), 1, `j') in `j'
. }
type mismatch
r(109);

. 
. summarize eigenvalue, meanonly

. 
. quietly gen percent_var_exp = 100 * eigenvalue / r(sum)
variable percent_var_exp already defined
r(110);

. 
. list eigenvalue percent_var_exp in 1/11

     +---------------------+
     | eigenv~e   percen~p |
     |---------------------|
  1. |        .          . |
  2. |        .          . |
  3. |        .          . |
  4. |        .          . |
  5. |        .          . |
     |---------------------|
  6. |        .          . |
  7. |        .          . |
  8. |        .          . |
  9. |        .          . |
 10. |        .          . |
     |---------------------|
 11. |        .          . |
     +---------------------+

. 
. *Keep the first two factors, f1 and f2

. score f1 f2
variable f1 already defined
r(110);

. 
. * Do the rotation

. 
. matrix evec = get(Ld)

. scalar a1=evec[1,1]/(evec[1,1]+evec[1,2])

. scalar a2=evec[1,2]/(evec[1,1]+evec[1,2])

. 
. sum f1

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f1 |        127   -5.46e-09    1.790299  -3.663735   16.13608

. scalar vf1=r(sd)^2

. sum f2

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f2 |        127    2.43e-09    1.315818  -3.807915   5.127779

. scalar vf2=r(sd)^2

. 
. scalar b1=-1*a2*vf2/(a1*vf1-a2*vf2)

. scalar b2=a1*vf1/(a1*vf1-a2*vf2)

. 
. 
. *Display weights

. 
. disp a1 a2 b1 b2
-.047694231.0476942.92227651.07772349

. 
. 
. *Generate rotated factors

. 
. gen transfact1=a1*f1+a2*f2
variable transfact1 already defined
r(110);

. gen transfact2=b1*f1+b2*f2
variable transfact2 already defined
r(110);

. 
. *Normalize factors so that transfact1 has coefficient 1 on mp1tight IN SAMPLE

. 
. reg mp1tight transfact1 if change2ytight~=.
change2ytight not found
r(111);

. replace transfact1=transfact1*_b[transfact1]
_b not allowed when e(b) is not present
r(111);

. 
. *and transfact2 moves ed4 as much as transfact1 does

. 
. reg ed4tightchange transfact1 transfact2 if change2ytight~=.
change2ytight not found
r(111);

. replace transfact2=transfact2*_b[transfact2]/_b[transfact1]
_b not allowed when e(b) is not present
r(111);

. 
. 
. 
. 
. ***************************************************

. *     Provide labels for outreg                   *

. ****************************************************

. 
. 
. label var mp1 "MP1"

. label var mp2 "MP2"

. label var mp3 "MP3"

. label var ed1change "ED1"

. label var change3m "3Mth"

. label var change6m "6Mth"

. label var change12m "12Mth"

. label var change3y "3Yr"

. label var change5y "5Yr"

. label var change10y "10Yr"

. label var sp "S&P500"

. label var ndx "NASDAQ"

. label var dji "DJIA"

. 
. 
. ****************************

. * Run regressions          *

. * Robust standard errors   *

. ****************************

. 
. 
. reg mp1tight transfact1 if change2ytight~=., r 
change2ytight not found
r(111);

. outreg using factors_fulls_jan262005, replace coefastr se 3aster 
command outreg is unrecognized
r(199);

. reg mp1tight transfact1 transfact2 if change2ytight~=., r 
change2ytight not found
r(111);

. outreg using factors_fulls_jan262005, append coefastr se 3aster 
command outreg is unrecognized
r(199);

. 
. 
. 
. 
. 
. 
. foreach var of varlist mp2tight-changefwdt {
  2. 
. reg `var' transfact1 if change2ytight~=., r 
  3. outreg using factors_fulls_jan262005, append coefastr se 3aster 
  4. reg `var' transfact1 transfact2 if change2ytight~=., r 
  5. outreg using factors_fulls_jan262005, append coefastr se 3aster 
  6. }
variable mp2tight not found
r(111);

. 
. reg spchangetight transfact1, r 
variable spchangetight not found
r(111);

. outreg using factors_fulls_jan262005, append coefastr se 3aster 
command outreg is unrecognized
r(199);

. reg spchangetight transfact1 transfact2, r 
variable spchangetight not found
r(111);

. outreg using factors_fulls_jan262005, append coefastr se 3aster 
command outreg is unrecognized
r(199);

. 
. cls

. *version 8

. *capture log close

. *capture log using gss3_revised_feb012005.log, t replace

. 
. *!date

. 
. *set more off

. * set mem 50m

. 
. import excel "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechniq
> ue/1. M2/2. S2/Econometrics Project/2. Results/1. Clean data/db_clean.xlsx", first
> row clear
(20 vars, 133 obs)

. drop date

. save "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2
> /2. S2/Econometrics Project/2. Results/1. Clean data/db_clean.dta", replace
file /Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1.
    M2/2. S2/Econometrics Project/2. Results/1. Clean data/db_clean.dta saved

. use "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/
> 2. S2/Econometrics Project/2. Results/1. Clean data/db_clean.dta", clear

. 
. ***********************************************

. *  Do principal components on eleven variables  *

. ***********************************************

. 
. pca mp1 mp2 mp3 ed1change change3m change6m change12m change3y change5y change10y 
> ndx
(obs=127)
(principal components; 11 components retained)

Component    Eigenvalue     Difference    Proportion    Cumulative
------------------------------------------------------------------
     1        3.20517         1.47380      0.2914         0.2914
     2        1.73138         0.12025      0.1574         0.4488
     3        1.61112         0.46587      0.1465         0.5952
     4        1.14525         0.25379      0.1041         0.6994
     5        0.89146         0.11926      0.0810         0.7804
     6        0.77220         0.12672      0.0702         0.8506
     7        0.64548         0.14822      0.0587         0.9093
     8        0.49726         0.08288      0.0452         0.9545
     9        0.41438         0.33546      0.0377         0.9922
    10        0.07892         0.07154      0.0072         0.9993
    11        0.00738               .      0.0007         1.0000

               Eigenvectors
    Variable |      1          2          3          4          5          6
-------------+-----------------------------------------------------------------
         mp1 |   0.01486   -0.32643    0.42281    0.16606   -0.64060    0.14709
         mp2 |  -0.05564    0.41793   -0.53651    0.02727   -0.00799    0.07182
         mp3 |   0.02948   -0.23867    0.38960   -0.49975    0.51874   -0.18340
   ed1change |  -0.18470   -0.20270    0.07610    0.62860    0.27368    0.20474
    change3m |  -0.06030    0.47494    0.38103    0.22026    0.03561   -0.27747
    change6m |  -0.05771    0.48084    0.38311    0.18943    0.01218   -0.27934
   change12m |   0.19449    0.29784    0.27166   -0.06643    0.23052    0.83072
    change3y |   0.53245    0.09136    0.01459   -0.02143   -0.08732    0.03832
    change5y |   0.54583    0.01405   -0.01523    0.05659   -0.04471   -0.10845
   change10y |   0.53607   -0.00657   -0.03935    0.07990   -0.03697   -0.15655
         ndx |   0.21933   -0.25819   -0.08975    0.47743    0.42431   -0.12161

               Eigenvectors
    Variable |      7          8          9         10         11
-------------+------------------------------------------------------
         mp1 |  -0.17486    0.01100    0.47343   -0.00463    0.00477
         mp2 |   0.00127    0.03365    0.72608    0.00915    0.00535
         mp3 |   0.13018    0.02279    0.46838    0.02677    0.01856
   ed1change |   0.62497    0.04247    0.11425    0.03393    0.02137
    change3m |  -0.01798   -0.70368    0.05595   -0.00774   -0.01222
    change6m |  -0.06012    0.70712   -0.01054    0.02420    0.01718
   change12m |  -0.17095   -0.00133   -0.03058   -0.14639   -0.02053
    change3y |   0.18541   -0.02196   -0.01602    0.75386    0.30818
    change5y |   0.19046    0.02569    0.03627   -0.10441   -0.79720
   change10y |   0.15786    0.00947    0.03116   -0.62054    0.51743
         ndx |  -0.65814    0.00047    0.09759    0.10811    0.00702

. 
. gen eigenvalue = .
(133 missing values generated)

. quietly forval j = 1/11 {
.    replace eigenvalue = el(e(Ev), 1, `j') in `j'
. }
type mismatch
r(109);

. 
. summarize eigenvalue, meanonly

. 
. quietly gen percent_var_exp = 100 * eigenvalue / r(sum)

. 
. list eigenvalue percent_var_exp in 1/11

     +---------------------+
     | eigenv~e   percen~p |
     |---------------------|
  1. |        .          . |
  2. |        .          . |
  3. |        .          . |
  4. |        .          . |
  5. |        .          . |
     |---------------------|
  6. |        .          . |
  7. |        .          . |
  8. |        .          . |
  9. |        .          . |
 10. |        .          . |
     |---------------------|
 11. |        .          . |
     +---------------------+

. 
. *Keep the first two factors, f1 and f2

. score f1 f2
            (based on unrotated principal components)
            (9 scorings not used)

               Scoring coefficients
    Variable |      1          2
-------------+---------------------
         mp1 |   0.01486   -0.32643
         mp2 |  -0.05564    0.41793
         mp3 |   0.02948   -0.23867
   ed1change |  -0.18470   -0.20270
    change3m |  -0.06030    0.47494
    change6m |  -0.05771    0.48084
   change12m |   0.19449    0.29784
    change3y |   0.53245    0.09136
    change5y |   0.54583    0.01405
   change10y |   0.53607   -0.00657
         ndx |   0.21933   -0.25819

. 
. * Do the rotation

. 
. matrix evec = get(Ld)

. scalar a1=evec[1,1]/(evec[1,1]+evec[1,2])

. scalar a2=evec[1,2]/(evec[1,1]+evec[1,2])

. 
. sum f1

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f1 |        127   -5.46e-09    1.790299  -3.663735   16.13608

. scalar vf1=r(sd)^2

. sum f2

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f2 |        127    2.43e-09    1.315818  -3.807915   5.127779

. scalar vf2=r(sd)^2

. 
. scalar b1=-1*a2*vf2/(a1*vf1-a2*vf2)

. scalar b2=a1*vf1/(a1*vf1-a2*vf2)

. 
. 
. *Display weights

. 
. disp a1 a2 b1 b2
-.047694231.0476942.92227651.07772349

. 
. 
. *Generate rotated factors

. 
. gen transfact1=a1*f1+a2*f2
(6 missing values generated)

. gen transfact2=b1*f1+b2*f2
(6 missing values generated)

. 
. *Normalize factors so that transfact1 has coefficient 1 on mp1tight IN SAMPLE

. 
. reg mp1tight transfact1 if change2ytight~=.
change2ytight not found
r(111);

. replace transfact1=transfact1*_b[transfact1]
_b not allowed when e(b) is not present
r(111);

. 
. *and transfact2 moves ed4 as much as transfact1 does

. 
. reg ed4tightchange transfact1 transfact2 if change2ytight~=.
change2ytight not found
r(111);

. replace transfact2=transfact2*_b[transfact2]/_b[transfact1]
_b not allowed when e(b) is not present
r(111);

. 
. 
. 
. 
. ***************************************************

. *     Provide labels for outreg                   *

. ****************************************************

. 
. 
. label var mp1 "MP1"

. label var mp2 "MP2"

. label var mp3 "MP3"

. label var ed1change "ED1"

. label var change3m "3Mth"

. label var change6m "6Mth"

. label var change12m "12Mth"

. label var change3y "3Yr"

. label var change5y "5Yr"

. label var change10y "10Yr"

. label var sp "S&P500"

. label var ndx "NASDAQ"

. label var dji "DJIA"

. 
. 
. ****************************

. * Run regressions          *

. * Robust standard errors   *

. ****************************

. 
. 
. reg mp1tight transfact1 if change2ytight~=., r 
change2ytight not found
r(111);

. outreg using factors_fulls_jan262005, replace coefastr se 3aster 
command outreg is unrecognized
r(199);

. reg mp1tight transfact1 transfact2 if change2ytight~=., r 
change2ytight not found
r(111);

. outreg using factors_fulls_jan262005, append coefastr se 3aster 
command outreg is unrecognized
r(199);

. 
. 
. 
. 
. 
. 
. foreach var of varlist mp2tight-changefwdt {
  2. 
. reg `var' transfact1 if change2ytight~=., r 
  3. outreg using factors_fulls_jan262005, append coefastr se 3aster 
  4. reg `var' transfact1 transfact2 if change2ytight~=., r 
  5. outreg using factors_fulls_jan262005, append coefastr se 3aster 
  6. }
variable mp2tight not found
r(111);

. 
. reg spchangetight transfact1, r 
variable spchangetight not found
r(111);

. outreg using factors_fulls_jan262005, append coefastr se 3aster 
command outreg is unrecognized
r(199);

. reg spchangetight transfact1 transfact2, r 
variable spchangetight not found
r(111);

. outreg using factors_fulls_jan262005, append coefastr se 3aster 
command outreg is unrecognized
r(199);

. 
. cls

. *version 8

. *capture log close

. *capture log using gss3_revised_feb012005.log, t replace

. 
. *!date

. 
. *set more off

. * set mem 50m

. 
. import excel "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechniq
> ue/1. M2/2. S2/Econometrics Project/2. Results/1. Clean data/db_clean.xlsx", first
> row clear
(20 vars, 133 obs)

. drop date

. save "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2
> /2. S2/Econometrics Project/2. Results/1. Clean data/db_clean.dta", replace
file /Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1.
    M2/2. S2/Econometrics Project/2. Results/1. Clean data/db_clean.dta saved

. use "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/
> 2. S2/Econometrics Project/2. Results/1. Clean data/db_clean.dta", clear

. 
. ***********************************************

. *  Do principal components on eleven variables  *

. ***********************************************

. 
. pca mp1 mp2 mp3 ed1change change3m change6m change12m change3y change5y change10y 
> ndx
(obs=127)
(principal components; 11 components retained)

Component    Eigenvalue     Difference    Proportion    Cumulative
------------------------------------------------------------------
     1        3.20517         1.47380      0.2914         0.2914
     2        1.73138         0.12025      0.1574         0.4488
     3        1.61112         0.46587      0.1465         0.5952
     4        1.14525         0.25379      0.1041         0.6994
     5        0.89146         0.11926      0.0810         0.7804
     6        0.77220         0.12672      0.0702         0.8506
     7        0.64548         0.14822      0.0587         0.9093
     8        0.49726         0.08288      0.0452         0.9545
     9        0.41438         0.33546      0.0377         0.9922
    10        0.07892         0.07154      0.0072         0.9993
    11        0.00738               .      0.0007         1.0000

               Eigenvectors
    Variable |      1          2          3          4          5          6
-------------+-----------------------------------------------------------------
         mp1 |   0.01486   -0.32643    0.42281    0.16606   -0.64060    0.14709
         mp2 |  -0.05564    0.41793   -0.53651    0.02727   -0.00799    0.07182
         mp3 |   0.02948   -0.23867    0.38960   -0.49975    0.51874   -0.18340
   ed1change |  -0.18470   -0.20270    0.07610    0.62860    0.27368    0.20474
    change3m |  -0.06030    0.47494    0.38103    0.22026    0.03561   -0.27747
    change6m |  -0.05771    0.48084    0.38311    0.18943    0.01218   -0.27934
   change12m |   0.19449    0.29784    0.27166   -0.06643    0.23052    0.83072
    change3y |   0.53245    0.09136    0.01459   -0.02143   -0.08732    0.03832
    change5y |   0.54583    0.01405   -0.01523    0.05659   -0.04471   -0.10845
   change10y |   0.53607   -0.00657   -0.03935    0.07990   -0.03697   -0.15655
         ndx |   0.21933   -0.25819   -0.08975    0.47743    0.42431   -0.12161

               Eigenvectors
    Variable |      7          8          9         10         11
-------------+------------------------------------------------------
         mp1 |  -0.17486    0.01100    0.47343   -0.00463    0.00477
         mp2 |   0.00127    0.03365    0.72608    0.00915    0.00535
         mp3 |   0.13018    0.02279    0.46838    0.02677    0.01856
   ed1change |   0.62497    0.04247    0.11425    0.03393    0.02137
    change3m |  -0.01798   -0.70368    0.05595   -0.00774   -0.01222
    change6m |  -0.06012    0.70712   -0.01054    0.02420    0.01718
   change12m |  -0.17095   -0.00133   -0.03058   -0.14639   -0.02053
    change3y |   0.18541   -0.02196   -0.01602    0.75386    0.30818
    change5y |   0.19046    0.02569    0.03627   -0.10441   -0.79720
   change10y |   0.15786    0.00947    0.03116   -0.62054    0.51743
         ndx |  -0.65814    0.00047    0.09759    0.10811    0.00702

. 
. gen eigenvalue = .
(133 missing values generated)

. quietly forval j = 1/1/11 {
.    replace eigenvalue = el(e(Ev), 1, `j') in `j'
. }
invalid syntax
r(198);

. 
. summarize eigenvalue, meanonly

. 
. quietly gen percent_var_exp = 100 * eigenvalue / r(sum)

. 
. list eigenvalue percent_var_exp in 1/1/11
invalid '/' 
r(198);

. 
. *Keep the first two factors, f1 and f2

. score f1 f2
            (based on unrotated principal components)
            (9 scorings not used)

               Scoring coefficients
    Variable |      1          2
-------------+---------------------
         mp1 |   0.01486   -0.32643
         mp2 |  -0.05564    0.41793
         mp3 |   0.02948   -0.23867
   ed1change |  -0.18470   -0.20270
    change3m |  -0.06030    0.47494
    change6m |  -0.05771    0.48084
   change12m |   0.19449    0.29784
    change3y |   0.53245    0.09136
    change5y |   0.54583    0.01405
   change10y |   0.53607   -0.00657
         ndx |   0.21933   -0.25819

. 
. * Do the rotation

. 
. matrix evec = get(Ld)

. scalar a1=evec[1,1]/(evec[1,1]+evec[1,2])

. scalar a2=evec[1,2]/(evec[1,1]+evec[1,2])

. 
. sum f1

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f1 |        127   -5.46e-09    1.790299  -3.663735   16.13608

. scalar vf1=r(sd)^2

. sum f2

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f2 |        127    2.43e-09    1.315818  -3.807915   5.127779

. scalar vf2=r(sd)^2

. 
. scalar b1=-1*a2*vf2/(a1*vf1-a2*vf2)

. scalar b2=a1*vf1/(a1*vf1-a2*vf2)

. 
. 
. *Display weights

. 
. disp a1 a2 b1 b2
-.047694231.0476942.92227651.07772349

. 
. 
. *Generate rotated factors

. 
. gen transfact1=a1*f1+a2*f2
(6 missing values generated)

. gen transfact2=b1*f1+b2*f2
(6 missing values generated)

. 
. *Normalize factors so that transfact1 has coefficient 1 on mp1tight IN SAMPLE

. 
. reg mp1tight transfact1 if change2ytight~=.
change2ytight not found
r(111);

. replace transfact1=transfact1*_b[transfact1]
_b not allowed when e(b) is not present
r(111);

. 
. *and transfact2 moves ed4 as much as transfact1 does

. 
. reg ed4tightchange transfact1 transfact2 if change2ytight~=.
change2ytight not found
r(111);

. replace transfact2=transfact2*_b[transfact2]/_b[transfact1]
_b not allowed when e(b) is not present
r(111);

. 
. 
. 
. 
. ***************************************************

. *     Provide labels for outreg                   *

. ****************************************************

. 
. 
. label var mp1 "MP1"

. label var mp2 "MP2"

. label var mp3 "MP3"

. label var ed1change "ED1"

. label var change3m "3Mth"

. label var change6m "6Mth"

. label var change12m "12Mth"

. label var change3y "3Yr"

. label var change5y "5Yr"

. label var change10y "10Yr"

. label var sp "S&P500"

. label var ndx "NASDAQ"

. label var dji "DJIA"

. 
. 
. ****************************

. * Run regressions          *

. * Robust standard errors   *

. ****************************

. 
. 
. reg mp1tight transfact1 if change2ytight~=., r 
change2ytight not found
r(111);

. outreg using factors_fulls_jan262005, replace coefastr se 3aster 
command outreg is unrecognized
r(199);

. reg mp1tight transfact1 transfact2 if change2ytight~=., r 
change2ytight not found
r(111);

. outreg using factors_fulls_jan262005, append coefastr se 3aster 
command outreg is unrecognized
r(199);

. 
. 
. 
. 
. 
. 
. foreach var of varlist mp2tight-changefwdt {
  2. 
. reg `var' transfact1 if change2ytight~=., r 
  3. outreg using factors_fulls_jan262005, append coefastr se 3aster 
  4. reg `var' transfact1 transfact2 if change2ytight~=., r 
  5. outreg using factors_fulls_jan262005, append coefastr se 3aster 
  6. }
variable mp2tight not found
r(111);

. 
. reg spchangetight transfact1, r 
variable spchangetight not found
r(111);

. outreg using factors_fulls_jan262005, append coefastr se 3aster 
command outreg is unrecognized
r(199);

. reg spchangetight transfact1 transfact2, r 
variable spchangetight not found
r(111);

. outreg using factors_fulls_jan262005, append coefastr se 3aster 
command outreg is unrecognized
r(199);

. 
. cls

. *version 8

. *capture log close

. *capture log using gss3_revised_feb012005.log, t replace

. 
. *!date

. 
. *set more off

. * set mem 50m

. 
. import excel "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechniq
> ue/1. M2/2. S2/Econometrics Project/2. Results/1. Clean data/db_clean.xlsx", first
> row clear
(20 vars, 133 obs)

. drop date

. save "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2
> /2. S2/Econometrics Project/2. Results/1. Clean data/db_clean.dta", replace
file /Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1.
    M2/2. S2/Econometrics Project/2. Results/1. Clean data/db_clean.dta saved

. use "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/
> 2. S2/Econometrics Project/2. Results/1. Clean data/db_clean.dta", clear

. 
. ***********************************************

. *  Do principal components on eleven variables  *

. ***********************************************

. 
. pca mp1 mp2 mp3 ed1change change3m change6m change12m change3y change5y change10y 
> ndx
(obs=127)
(principal components; 11 components retained)

Component    Eigenvalue     Difference    Proportion    Cumulative
------------------------------------------------------------------
     1        3.20517         1.47380      0.2914         0.2914
     2        1.73138         0.12025      0.1574         0.4488
     3        1.61112         0.46587      0.1465         0.5952
     4        1.14525         0.25379      0.1041         0.6994
     5        0.89146         0.11926      0.0810         0.7804
     6        0.77220         0.12672      0.0702         0.8506
     7        0.64548         0.14822      0.0587         0.9093
     8        0.49726         0.08288      0.0452         0.9545
     9        0.41438         0.33546      0.0377         0.9922
    10        0.07892         0.07154      0.0072         0.9993
    11        0.00738               .      0.0007         1.0000

               Eigenvectors
    Variable |      1          2          3          4          5          6
-------------+-----------------------------------------------------------------
         mp1 |   0.01486   -0.32643    0.42281    0.16606   -0.64060    0.14709
         mp2 |  -0.05564    0.41793   -0.53651    0.02727   -0.00799    0.07182
         mp3 |   0.02948   -0.23867    0.38960   -0.49975    0.51874   -0.18340
   ed1change |  -0.18470   -0.20270    0.07610    0.62860    0.27368    0.20474
    change3m |  -0.06030    0.47494    0.38103    0.22026    0.03561   -0.27747
    change6m |  -0.05771    0.48084    0.38311    0.18943    0.01218   -0.27934
   change12m |   0.19449    0.29784    0.27166   -0.06643    0.23052    0.83072
    change3y |   0.53245    0.09136    0.01459   -0.02143   -0.08732    0.03832
    change5y |   0.54583    0.01405   -0.01523    0.05659   -0.04471   -0.10845
   change10y |   0.53607   -0.00657   -0.03935    0.07990   -0.03697   -0.15655
         ndx |   0.21933   -0.25819   -0.08975    0.47743    0.42431   -0.12161

               Eigenvectors
    Variable |      7          8          9         10         11
-------------+------------------------------------------------------
         mp1 |  -0.17486    0.01100    0.47343   -0.00463    0.00477
         mp2 |   0.00127    0.03365    0.72608    0.00915    0.00535
         mp3 |   0.13018    0.02279    0.46838    0.02677    0.01856
   ed1change |   0.62497    0.04247    0.11425    0.03393    0.02137
    change3m |  -0.01798   -0.70368    0.05595   -0.00774   -0.01222
    change6m |  -0.06012    0.70712   -0.01054    0.02420    0.01718
   change12m |  -0.17095   -0.00133   -0.03058   -0.14639   -0.02053
    change3y |   0.18541   -0.02196   -0.01602    0.75386    0.30818
    change5y |   0.19046    0.02569    0.03627   -0.10441   -0.79720
   change10y |   0.15786    0.00947    0.03116   -0.62054    0.51743
         ndx |  -0.65814    0.00047    0.09759    0.10811    0.00702

. 
. *gen eigenvalue = .

. *quietly forval j = 1/1/11 {

. *   replace eigenvalue = el(e(Ev), 1, `j') in `j'

. *}

. 
. summarize eigenvalue, meanonly
variable eigenvalue not found
r(111);

. 
. quietly gen percent_var_exp = 100 * eigenvalue / r(sum)
eigenvalue not found
r(111);

. 
. list eigenvalue percent_var_exp in 1/1/11
variable eigenvalue not found
r(111);

. 
. *Keep the first two factors, f1 and f2

. score f1 f2
            (based on unrotated principal components)
            (9 scorings not used)

               Scoring coefficients
    Variable |      1          2
-------------+---------------------
         mp1 |   0.01486   -0.32643
         mp2 |  -0.05564    0.41793
         mp3 |   0.02948   -0.23867
   ed1change |  -0.18470   -0.20270
    change3m |  -0.06030    0.47494
    change6m |  -0.05771    0.48084
   change12m |   0.19449    0.29784
    change3y |   0.53245    0.09136
    change5y |   0.54583    0.01405
   change10y |   0.53607   -0.00657
         ndx |   0.21933   -0.25819

. 
. * Do the rotation

. 
. matrix evec = get(Ld)

. scalar a1=evec[1,1]/(evec[1,1]+evec[1,2])

. scalar a2=evec[1,2]/(evec[1,1]+evec[1,2])

. 
. sum f1

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f1 |        127   -5.46e-09    1.790299  -3.663735   16.13608

. scalar vf1=r(sd)^2

. sum f2

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f2 |        127    2.43e-09    1.315818  -3.807915   5.127779

. scalar vf2=r(sd)^2

. 
. scalar b1=-1*a2*vf2/(a1*vf1-a2*vf2)

. scalar b2=a1*vf1/(a1*vf1-a2*vf2)

. 
. 
. *Display weights

. 
. disp a1 a2 b1 b2
-.047694231.0476942.92227651.07772349

. 
. 
. *Generate rotated factors

. 
. gen transfact1=a1*f1+a2*f2
(6 missing values generated)

. gen transfact2=b1*f1+b2*f2
(6 missing values generated)

. 
. *Normalize factors so that transfact1 has coefficient 1 on mp1tight IN SAMPLE

. 
. reg mp1tight transfact1 if change2ytight~=.
change2ytight not found
r(111);

. replace transfact1=transfact1*_b[transfact1]
_b not allowed when e(b) is not present
r(111);

. 
. *and transfact2 moves ed4 as much as transfact1 does

. 
. reg ed4tightchange transfact1 transfact2 if change2ytight~=.
change2ytight not found
r(111);

. replace transfact2=transfact2*_b[transfact2]/_b[transfact1]
_b not allowed when e(b) is not present
r(111);

. 
. 
. 
. 
. ***************************************************

. *     Provide labels for outreg                   *

. ****************************************************

. 
. 
. label var mp1 "MP1"

. label var mp2 "MP2"

. label var mp3 "MP3"

. label var ed1change "ED1"

. label var change3m "3Mth"

. label var change6m "6Mth"

. label var change12m "12Mth"

. label var change3y "3Yr"

. label var change5y "5Yr"

. label var change10y "10Yr"

. label var sp "S&P500"

. label var ndx "NASDAQ"

. label var dji "DJIA"

. 
. 
. ****************************

. * Run regressions          *

. * Robust standard errors   *

. ****************************

. 
. 
. reg mp1tight transfact1 if change2ytight~=., r 
change2ytight not found
r(111);

. outreg using factors_fulls_jan262005, replace coefastr se 3aster 
command outreg is unrecognized
r(199);

. reg mp1tight transfact1 transfact2 if change2ytight~=., r 
change2ytight not found
r(111);

. outreg using factors_fulls_jan262005, append coefastr se 3aster 
command outreg is unrecognized
r(199);

. 
. 
. 
. 
. 
. 
. foreach var of varlist mp2tight-changefwdt {
  2. 
. reg `var' transfact1 if change2ytight~=., r 
  3. outreg using factors_fulls_jan262005, append coefastr se 3aster 
  4. reg `var' transfact1 transfact2 if change2ytight~=., r 
  5. outreg using factors_fulls_jan262005, append coefastr se 3aster 
  6. }
variable mp2tight not found
r(111);

. 
. reg spchangetight transfact1, r 
variable spchangetight not found
r(111);

. outreg using factors_fulls_jan262005, append coefastr se 3aster 
command outreg is unrecognized
r(199);

. reg spchangetight transfact1 transfact2, r 
variable spchangetight not found
r(111);

. outreg using factors_fulls_jan262005, append coefastr se 3aster 
command outreg is unrecognized
r(199);

. 
. cls

. *version 8

. *capture log close

. *capture log using gss3_revised_feb012005.log, t replace

. 
. *!date

. 
. *set more off

. * set mem 50m

. 
. import excel "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechniq
> ue/1. M2/2. S2/Econometrics Project/2. Results/1. Clean data/db_clean.xlsx", first
> row clear
(20 vars, 133 obs)

. drop date

. save "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2
> /2. S2/Econometrics Project/2. Results/1. Clean data/db_clean.dta", replace
file /Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1.
    M2/2. S2/Econometrics Project/2. Results/1. Clean data/db_clean.dta saved

. use "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/
> 2. S2/Econometrics Project/2. Results/1. Clean data/db_clean.dta", clear

. 
. ***********************************************

. *  Do principal components on eleven variables  *

. ***********************************************

. 
. pca mp1 mp2 mp3 ed1change change3m change6m change12m change3y change5y change10y 
> ndx
(obs=127)
(principal components; 11 components retained)

Component    Eigenvalue     Difference    Proportion    Cumulative
------------------------------------------------------------------
     1        3.20517         1.47380      0.2914         0.2914
     2        1.73138         0.12025      0.1574         0.4488
     3        1.61112         0.46587      0.1465         0.5952
     4        1.14525         0.25379      0.1041         0.6994
     5        0.89146         0.11926      0.0810         0.7804
     6        0.77220         0.12672      0.0702         0.8506
     7        0.64548         0.14822      0.0587         0.9093
     8        0.49726         0.08288      0.0452         0.9545
     9        0.41438         0.33546      0.0377         0.9922
    10        0.07892         0.07154      0.0072         0.9993
    11        0.00738               .      0.0007         1.0000

               Eigenvectors
    Variable |      1          2          3          4          5          6
-------------+-----------------------------------------------------------------
         mp1 |   0.01486   -0.32643    0.42281    0.16606   -0.64060    0.14709
         mp2 |  -0.05564    0.41793   -0.53651    0.02727   -0.00799    0.07182
         mp3 |   0.02948   -0.23867    0.38960   -0.49975    0.51874   -0.18340
   ed1change |  -0.18470   -0.20270    0.07610    0.62860    0.27368    0.20474
    change3m |  -0.06030    0.47494    0.38103    0.22026    0.03561   -0.27747
    change6m |  -0.05771    0.48084    0.38311    0.18943    0.01218   -0.27934
   change12m |   0.19449    0.29784    0.27166   -0.06643    0.23052    0.83072
    change3y |   0.53245    0.09136    0.01459   -0.02143   -0.08732    0.03832
    change5y |   0.54583    0.01405   -0.01523    0.05659   -0.04471   -0.10845
   change10y |   0.53607   -0.00657   -0.03935    0.07990   -0.03697   -0.15655
         ndx |   0.21933   -0.25819   -0.08975    0.47743    0.42431   -0.12161

               Eigenvectors
    Variable |      7          8          9         10         11
-------------+------------------------------------------------------
         mp1 |  -0.17486    0.01100    0.47343   -0.00463    0.00477
         mp2 |   0.00127    0.03365    0.72608    0.00915    0.00535
         mp3 |   0.13018    0.02279    0.46838    0.02677    0.01856
   ed1change |   0.62497    0.04247    0.11425    0.03393    0.02137
    change3m |  -0.01798   -0.70368    0.05595   -0.00774   -0.01222
    change6m |  -0.06012    0.70712   -0.01054    0.02420    0.01718
   change12m |  -0.17095   -0.00133   -0.03058   -0.14639   -0.02053
    change3y |   0.18541   -0.02196   -0.01602    0.75386    0.30818
    change5y |   0.19046    0.02569    0.03627   -0.10441   -0.79720
   change10y |   0.15786    0.00947    0.03116   -0.62054    0.51743
         ndx |  -0.65814    0.00047    0.09759    0.10811    0.00702

. 
. * Generate a variable to store eigenvalues

. gen eigenvalue = .
(133 missing values generated)

. 
. * Retrieve and store the eigenvalues from the PCA output

. quietly forval j = 1/11 {
.    replace eigenvalue = el(e(values), 1, `j') in `j'
. }
type mismatch
r(109);

. 
. * Sum the eigenvalues to get the total variance explained by all components

. summarize eigenvalue, meanonly

. 
. * Calculate the percentage of total variance explained by each component

. quietly gen percent_var_exp = 100 * eigenvalue / r(sum)

. 
. * List the eigenvalues and the percent variance explained

. list eigenvalue percent_var_exp in 1/11

     +---------------------+
     | eigenv~e   percen~p |
     |---------------------|
  1. |        .          . |
  2. |        .          . |
  3. |        .          . |
  4. |        .          . |
  5. |        .          . |
     |---------------------|
  6. |        .          . |
  7. |        .          . |
  8. |        .          . |
  9. |        .          . |
 10. |        .          . |
     |---------------------|
 11. |        .          . |
     +---------------------+

. 
. 
. 
. *Keep the first two factors, f1 and f2

. score f1 f2
            (based on unrotated principal components)
            (9 scorings not used)

               Scoring coefficients
    Variable |      1          2
-------------+---------------------
         mp1 |   0.01486   -0.32643
         mp2 |  -0.05564    0.41793
         mp3 |   0.02948   -0.23867
   ed1change |  -0.18470   -0.20270
    change3m |  -0.06030    0.47494
    change6m |  -0.05771    0.48084
   change12m |   0.19449    0.29784
    change3y |   0.53245    0.09136
    change5y |   0.54583    0.01405
   change10y |   0.53607   -0.00657
         ndx |   0.21933   -0.25819

. 
. * Do the rotation

. 
. matrix evec = get(Ld)

. scalar a1=evec[1,1]/(evec[1,1]+evec[1,2])

. scalar a2=evec[1,2]/(evec[1,1]+evec[1,2])

. 
. sum f1

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f1 |        127   -5.46e-09    1.790299  -3.663735   16.13608

. scalar vf1=r(sd)^2

. sum f2

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f2 |        127    2.43e-09    1.315818  -3.807915   5.127779

. scalar vf2=r(sd)^2

. 
. scalar b1=-1*a2*vf2/(a1*vf1-a2*vf2)

. scalar b2=a1*vf1/(a1*vf1-a2*vf2)

. 
. 
. *Display weights

. 
. disp a1 a2 b1 b2
-.047694231.0476942.92227651.07772349

. 
. 
. *Generate rotated factors

. 
. gen transfact1=a1*f1+a2*f2
(6 missing values generated)

. gen transfact2=b1*f1+b2*f2
(6 missing values generated)

. 
. *Normalize factors so that transfact1 has coefficient 1 on mp1tight IN SAMPLE

. 
. reg mp1tight transfact1 if change2ytight~=.
change2ytight not found
r(111);

. replace transfact1=transfact1*_b[transfact1]
_b not allowed when e(b) is not present
r(111);

. 
. *and transfact2 moves ed4 as much as transfact1 does

. 
. reg ed4tightchange transfact1 transfact2 if change2ytight~=.
change2ytight not found
r(111);

. replace transfact2=transfact2*_b[transfact2]/_b[transfact1]
_b not allowed when e(b) is not present
r(111);

. 
. 
. 
. 
. ***************************************************

. *     Provide labels for outreg                   *

. ****************************************************

. 
. 
. label var mp1 "MP1"

. label var mp2 "MP2"

. label var mp3 "MP3"

. label var ed1change "ED1"

. label var change3m "3Mth"

. label var change6m "6Mth"

. label var change12m "12Mth"

. label var change3y "3Yr"

. label var change5y "5Yr"

. label var change10y "10Yr"

. label var sp "S&P500"

. label var ndx "NASDAQ"

. label var dji "DJIA"

. 
. 
. ****************************

. * Run regressions          *

. * Robust standard errors   *

. ****************************

. 
. 
. reg mp1tight transfact1 if change2ytight~=., r 
change2ytight not found
r(111);

. outreg using factors_fulls_jan262005, replace coefastr se 3aster 
command outreg is unrecognized
r(199);

. reg mp1tight transfact1 transfact2 if change2ytight~=., r 
change2ytight not found
r(111);

. outreg using factors_fulls_jan262005, append coefastr se 3aster 
command outreg is unrecognized
r(199);

. 
. 
. 
. 
. 
. 
. foreach var of varlist mp2tight-changefwdt {
  2. 
. reg `var' transfact1 if change2ytight~=., r 
  3. outreg using factors_fulls_jan262005, append coefastr se 3aster 
  4. reg `var' transfact1 transfact2 if change2ytight~=., r 
  5. outreg using factors_fulls_jan262005, append coefastr se 3aster 
  6. }
variable mp2tight not found
r(111);

. 
. reg spchangetight transfact1, r 
variable spchangetight not found
r(111);

. outreg using factors_fulls_jan262005, append coefastr se 3aster 
command outreg is unrecognized
r(199);

. reg spchangetight transfact1 transfact2, r 
variable spchangetight not found
r(111);

. outreg using factors_fulls_jan262005, append coefastr se 3aster 
command outreg is unrecognized
r(199);

. 
. cls

. *version 8

. *capture log close

. *capture log using gss3_revised_feb012005.log, t replace

. 
. *!date

. 
. *set more off

. * set mem 50m

. 
. import excel "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechniq
> ue/1. M2/2. S2/Econometrics Project/2. Results/1. Clean data/db_clean.xlsx", first
> row clear
(20 vars, 133 obs)

. drop date

. save "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2
> /2. S2/Econometrics Project/2. Results/1. Clean data/db_clean.dta", replace
file /Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1.
    M2/2. S2/Econometrics Project/2. Results/1. Clean data/db_clean.dta saved

. use "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/
> 2. S2/Econometrics Project/2. Results/1. Clean data/db_clean.dta", clear

. 
. ***********************************************

. *  Do principal components on eleven variables  *

. ***********************************************

. 
. pca mp1 mp2 mp3 ed1change change3m change6m change12m change3y change5y change10y 
> ndx
(obs=127)
(principal components; 11 components retained)

Component    Eigenvalue     Difference    Proportion    Cumulative
------------------------------------------------------------------
     1        3.20517         1.47380      0.2914         0.2914
     2        1.73138         0.12025      0.1574         0.4488
     3        1.61112         0.46587      0.1465         0.5952
     4        1.14525         0.25379      0.1041         0.6994
     5        0.89146         0.11926      0.0810         0.7804
     6        0.77220         0.12672      0.0702         0.8506
     7        0.64548         0.14822      0.0587         0.9093
     8        0.49726         0.08288      0.0452         0.9545
     9        0.41438         0.33546      0.0377         0.9922
    10        0.07892         0.07154      0.0072         0.9993
    11        0.00738               .      0.0007         1.0000

               Eigenvectors
    Variable |      1          2          3          4          5          6
-------------+-----------------------------------------------------------------
         mp1 |   0.01486   -0.32643    0.42281    0.16606   -0.64060    0.14709
         mp2 |  -0.05564    0.41793   -0.53651    0.02727   -0.00799    0.07182
         mp3 |   0.02948   -0.23867    0.38960   -0.49975    0.51874   -0.18340
   ed1change |  -0.18470   -0.20270    0.07610    0.62860    0.27368    0.20474
    change3m |  -0.06030    0.47494    0.38103    0.22026    0.03561   -0.27747
    change6m |  -0.05771    0.48084    0.38311    0.18943    0.01218   -0.27934
   change12m |   0.19449    0.29784    0.27166   -0.06643    0.23052    0.83072
    change3y |   0.53245    0.09136    0.01459   -0.02143   -0.08732    0.03832
    change5y |   0.54583    0.01405   -0.01523    0.05659   -0.04471   -0.10845
   change10y |   0.53607   -0.00657   -0.03935    0.07990   -0.03697   -0.15655
         ndx |   0.21933   -0.25819   -0.08975    0.47743    0.42431   -0.12161

               Eigenvectors
    Variable |      7          8          9         10         11
-------------+------------------------------------------------------
         mp1 |  -0.17486    0.01100    0.47343   -0.00463    0.00477
         mp2 |   0.00127    0.03365    0.72608    0.00915    0.00535
         mp3 |   0.13018    0.02279    0.46838    0.02677    0.01856
   ed1change |   0.62497    0.04247    0.11425    0.03393    0.02137
    change3m |  -0.01798   -0.70368    0.05595   -0.00774   -0.01222
    change6m |  -0.06012    0.70712   -0.01054    0.02420    0.01718
   change12m |  -0.17095   -0.00133   -0.03058   -0.14639   -0.02053
    change3y |   0.18541   -0.02196   -0.01602    0.75386    0.30818
    change5y |   0.19046    0.02569    0.03627   -0.10441   -0.79720
   change10y |   0.15786    0.00947    0.03116   -0.62054    0.51743
         ndx |  -0.65814    0.00047    0.09759    0.10811    0.00702

. 
. *Keep the first two factors, f1 and f2

. score f1 f2
            (based on unrotated principal components)
            (9 scorings not used)

               Scoring coefficients
    Variable |      1          2
-------------+---------------------
         mp1 |   0.01486   -0.32643
         mp2 |  -0.05564    0.41793
         mp3 |   0.02948   -0.23867
   ed1change |  -0.18470   -0.20270
    change3m |  -0.06030    0.47494
    change6m |  -0.05771    0.48084
   change12m |   0.19449    0.29784
    change3y |   0.53245    0.09136
    change5y |   0.54583    0.01405
   change10y |   0.53607   -0.00657
         ndx |   0.21933   -0.25819

. 
. * Do the rotation

. 
. matrix evec = get(Ld)

. scalar a1=evec[1,1]/(evec[1,1]+evec[1,2])

. scalar a2=evec[1,2]/(evec[1,1]+evec[1,2])

. 
. sum f1

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f1 |        127   -5.46e-09    1.790299  -3.663735   16.13608

. scalar vf1=r(sd)^2

. sum f2

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f2 |        127    2.43e-09    1.315818  -3.807915   5.127779

. scalar vf2=r(sd)^2

. 
. scalar b1=-1*a2*vf2/(a1*vf1-a2*vf2)

. scalar b2=a1*vf1/(a1*vf1-a2*vf2)

. 
. 
. *Display weights

. 
. disp a1 a2 b1 b2
-.047694231.0476942.92227651.07772349

. 
. 
. *Generate rotated factors

. 
. gen transfact1=a1*f1+a2*f2
(6 missing values generated)

. gen transfact2=b1*f1+b2*f2
(6 missing values generated)

. 
. *Normalize factors so that transfact1 has coefficient 1 on mp1tight IN SAMPLE

. 
. reg mp1tight transfact1 if change2ytight~=.
change2ytight not found
r(111);

. replace transfact1=transfact1*_b[transfact1]
_b not allowed when e(b) is not present
r(111);

. 
. *and transfact2 moves ed4 as much as transfact1 does

. 
. reg ed4tightchange transfact1 transfact2 if change2ytight~=.
change2ytight not found
r(111);

. replace transfact2=transfact2*_b[transfact2]/_b[transfact1]
_b not allowed when e(b) is not present
r(111);

. 
. 
. 
. 
. ***************************************************

. *     Provide labels for outreg                   *

. ****************************************************

. 
. 
. label var mp1 "MP1"

. label var mp2 "MP2"

. label var mp3 "MP3"

. label var ed1change "ED1"

. label var change3m "3Mth"

. label var change6m "6Mth"

. label var change12m "12Mth"

. label var change3y "3Yr"

. label var change5y "5Yr"

. label var change10y "10Yr"

. label var sp "S&P500"

. label var ndx "NASDAQ"

. label var dji "DJIA"

. 
. 
. ****************************

. * Run regressions          *

. * Robust standard errors   *

. ****************************

. 
. 
. reg mp1tight transfact1 if change2ytight~=., r 
change2ytight not found
r(111);

. outreg using factors_fulls_jan262005, replace coefastr se 3aster 
command outreg is unrecognized
r(199);

. reg mp1tight transfact1 transfact2 if change2ytight~=., r 
change2ytight not found
r(111);

. outreg using factors_fulls_jan262005, append coefastr se 3aster 
command outreg is unrecognized
r(199);

. 
. 
. 
. 
. 
. 
. foreach var of varlist mp2tight-changefwdt {
  2. 
. reg `var' transfact1 if change2ytight~=., r 
  3. outreg using factors_fulls_jan262005, append coefastr se 3aster 
  4. reg `var' transfact1 transfact2 if change2ytight~=., r 
  5. outreg using factors_fulls_jan262005, append coefastr se 3aster 
  6. }
variable mp2tight not found
r(111);

. 
. reg spchangetight transfact1, r 
variable spchangetight not found
r(111);

. outreg using factors_fulls_jan262005, append coefastr se 3aster 
command outreg is unrecognized
r(199);

. reg spchangetight transfact1 transfact2, r 
variable spchangetight not found
r(111);

. outreg using factors_fulls_jan262005, append coefastr se 3aster 
command outreg is unrecognized
r(199);

. 
. cls

. *version 8

. *capture log close

. *capture log using gss3_revised_feb012005.log, t replace

. 
. *!date

. 
. *set more off

. * set mem 50m

. 
. import excel "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechniq
> ue/1. M2/2. S2/Econometrics Project/2. Results/1. Clean data/db_clean.xlsx", first
> row clear
(20 vars, 133 obs)

. drop date

. save "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2
> /2. S2/Econometrics Project/2. Results/1. Clean data/db_clean.dta", replace
file /Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1.
    M2/2. S2/Econometrics Project/2. Results/1. Clean data/db_clean.dta saved

. use "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/
> 2. S2/Econometrics Project/2. Results/1. Clean data/db_clean.dta", clear

. 
. ***********************************************

. *  Do principal components on eleven variables  *

. ***********************************************

. 
. pca mp1 mp2 mp3 ed1change change3m change6m change12m change3y change5y change10y 
> ndx
(obs=127)
(principal components; 11 components retained)

Component    Eigenvalue     Difference    Proportion    Cumulative
------------------------------------------------------------------
     1        3.20517         1.47380      0.2914         0.2914
     2        1.73138         0.12025      0.1574         0.4488
     3        1.61112         0.46587      0.1465         0.5952
     4        1.14525         0.25379      0.1041         0.6994
     5        0.89146         0.11926      0.0810         0.7804
     6        0.77220         0.12672      0.0702         0.8506
     7        0.64548         0.14822      0.0587         0.9093
     8        0.49726         0.08288      0.0452         0.9545
     9        0.41438         0.33546      0.0377         0.9922
    10        0.07892         0.07154      0.0072         0.9993
    11        0.00738               .      0.0007         1.0000

               Eigenvectors
    Variable |      1          2          3          4          5          6
-------------+-----------------------------------------------------------------
         mp1 |   0.01486   -0.32643    0.42281    0.16606   -0.64060    0.14709
         mp2 |  -0.05564    0.41793   -0.53651    0.02727   -0.00799    0.07182
         mp3 |   0.02948   -0.23867    0.38960   -0.49975    0.51874   -0.18340
   ed1change |  -0.18470   -0.20270    0.07610    0.62860    0.27368    0.20474
    change3m |  -0.06030    0.47494    0.38103    0.22026    0.03561   -0.27747
    change6m |  -0.05771    0.48084    0.38311    0.18943    0.01218   -0.27934
   change12m |   0.19449    0.29784    0.27166   -0.06643    0.23052    0.83072
    change3y |   0.53245    0.09136    0.01459   -0.02143   -0.08732    0.03832
    change5y |   0.54583    0.01405   -0.01523    0.05659   -0.04471   -0.10845
   change10y |   0.53607   -0.00657   -0.03935    0.07990   -0.03697   -0.15655
         ndx |   0.21933   -0.25819   -0.08975    0.47743    0.42431   -0.12161

               Eigenvectors
    Variable |      7          8          9         10         11
-------------+------------------------------------------------------
         mp1 |  -0.17486    0.01100    0.47343   -0.00463    0.00477
         mp2 |   0.00127    0.03365    0.72608    0.00915    0.00535
         mp3 |   0.13018    0.02279    0.46838    0.02677    0.01856
   ed1change |   0.62497    0.04247    0.11425    0.03393    0.02137
    change3m |  -0.01798   -0.70368    0.05595   -0.00774   -0.01222
    change6m |  -0.06012    0.70712   -0.01054    0.02420    0.01718
   change12m |  -0.17095   -0.00133   -0.03058   -0.14639   -0.02053
    change3y |   0.18541   -0.02196   -0.01602    0.75386    0.30818
    change5y |   0.19046    0.02569    0.03627   -0.10441   -0.79720
   change10y |   0.15786    0.00947    0.03116   -0.62054    0.51743
         ndx |  -0.65814    0.00047    0.09759    0.10811    0.00702

. 
. *Keep the first two factors, f1 and f2

. score f1 f2
            (based on unrotated principal components)
            (9 scorings not used)

               Scoring coefficients
    Variable |      1          2
-------------+---------------------
         mp1 |   0.01486   -0.32643
         mp2 |  -0.05564    0.41793
         mp3 |   0.02948   -0.23867
   ed1change |  -0.18470   -0.20270
    change3m |  -0.06030    0.47494
    change6m |  -0.05771    0.48084
   change12m |   0.19449    0.29784
    change3y |   0.53245    0.09136
    change5y |   0.54583    0.01405
   change10y |   0.53607   -0.00657
         ndx |   0.21933   -0.25819

. 
. * Do the rotation

. 
. matrix evec = get(Ld)

. scalar a1=evec[1,1]/(evec[1,1]+evec[1,2])

. scalar a2=evec[1,2]/(evec[1,1]+evec[1,2])

. 
. sum f1

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f1 |        127   -5.46e-09    1.790299  -3.663735   16.13608

. scalar vf1=r(sd)^2

. sum f2

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f2 |        127    2.43e-09    1.315818  -3.807915   5.127779

. scalar vf2=r(sd)^2

. 
. scalar b1=-1*a2*vf2/(a1*vf1-a2*vf2)

. scalar b2=a1*vf1/(a1*vf1-a2*vf2)

. 
. 
. *Display weights

. 
. disp a1 a2 b1 b2
-.047694231.0476942.92227651.07772349

. 
. 
. *Generate rotated factors

. 
. gen transfact1=a1*f1+a2*f2
(6 missing values generated)

. gen transfact2=b1*f1+b2*f2
(6 missing values generated)

. 
. *Normalize factors so that transfact1 has coefficient 1 on mp1tight IN SAMPLE

. 
. reg mp1 transfact1

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =     28.41
       Model |  .227482891         1  .227482891   Prob > F        =    0.0000
    Residual |  1.00086947       125  .008006956   R-squared       =    0.1852
-------------+----------------------------------   Adj R-squared   =    0.1787
       Total |  1.22835236       126  .009748828   Root MSE        =    .08948

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |  -.0307629   .0057715    -5.33   0.000    -.0421854   -.0193404
       _cons |   .0005709   .0079402     0.07   0.943    -.0151438    .0162855
------------------------------------------------------------------------------

. replace transfact1=transfact1*_b[transfact1]
(127 real changes made)

. 
. *and transfact2 moves ed4 as much as transfact1 does

. 
. reg ed4tightchange transfact1 transfact2 if change2ytight~=.
change2ytight not found
r(111);

. replace transfact2=transfact2*_b[transfact2]/_b[transfact1]
[transfact2] not found
r(111);

. 
. 
. 
. 
. ***************************************************

. *     Provide labels for outreg                   *

. ****************************************************

. 
. 
. label var mp1 "MP1"

. label var mp2 "MP2"

. label var mp3 "MP3"

. label var ed1change "ED1"

. label var change3m "3Mth"

. label var change6m "6Mth"

. label var change12m "12Mth"

. label var change3y "3Yr"

. label var change5y "5Yr"

. label var change10y "10Yr"

. label var sp "S&P500"

. label var ndx "NASDAQ"

. label var dji "DJIA"

. 
. 
. ****************************

. * Run regressions          *

. * Robust standard errors   *

. ****************************

. 
. 
. reg mp1tight transfact1 if change2ytight~=., r 
change2ytight not found
r(111);

. outreg using factors_fulls_jan262005, replace coefastr se 3aster 
command outreg is unrecognized
r(199);

. reg mp1tight transfact1 transfact2 if change2ytight~=., r 
change2ytight not found
r(111);

. outreg using factors_fulls_jan262005, append coefastr se 3aster 
command outreg is unrecognized
r(199);

. 
. 
. 
. 
. 
. 
. foreach var of varlist mp2tight-changefwdt {
  2. 
. reg `var' transfact1 if change2ytight~=., r 
  3. outreg using factors_fulls_jan262005, append coefastr se 3aster 
  4. reg `var' transfact1 transfact2 if change2ytight~=., r 
  5. outreg using factors_fulls_jan262005, append coefastr se 3aster 
  6. }
variable mp2tight not found
r(111);

. 
. reg spchangetight transfact1, r 
variable spchangetight not found
r(111);

. outreg using factors_fulls_jan262005, append coefastr se 3aster 
command outreg is unrecognized
r(199);

. reg spchangetight transfact1 transfact2, r 
variable spchangetight not found
r(111);

. outreg using factors_fulls_jan262005, append coefastr se 3aster 
command outreg is unrecognized
r(199);

. 
. cls

. *version 8

. *capture log close

. *capture log using gss3_revised_feb012005.log, t replace

. 
. *!date

. 
. *set more off

. * set mem 50m

. 
. import excel "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechniq
> ue/1. M2/2. S2/Econometrics Project/2. Results/1. Clean data/db_clean.xlsx", first
> row clear
(20 vars, 133 obs)

. drop date

. save "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2
> /2. S2/Econometrics Project/2. Results/1. Clean data/db_clean.dta", replace
file /Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1.
    M2/2. S2/Econometrics Project/2. Results/1. Clean data/db_clean.dta saved

. use "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/
> 2. S2/Econometrics Project/2. Results/1. Clean data/db_clean.dta", clear

. 
. ***********************************************

. *  Do principal components on eleven variables  *

. ***********************************************

. 
. pca mp1 mp2 mp3 ed1change change3m change6m change12m change3y change5y change10y 
> ndx
(obs=127)
(principal components; 11 components retained)

Component    Eigenvalue     Difference    Proportion    Cumulative
------------------------------------------------------------------
     1        3.20517         1.47380      0.2914         0.2914
     2        1.73138         0.12025      0.1574         0.4488
     3        1.61112         0.46587      0.1465         0.5952
     4        1.14525         0.25379      0.1041         0.6994
     5        0.89146         0.11926      0.0810         0.7804
     6        0.77220         0.12672      0.0702         0.8506
     7        0.64548         0.14822      0.0587         0.9093
     8        0.49726         0.08288      0.0452         0.9545
     9        0.41438         0.33546      0.0377         0.9922
    10        0.07892         0.07154      0.0072         0.9993
    11        0.00738               .      0.0007         1.0000

               Eigenvectors
    Variable |      1          2          3          4          5          6
-------------+-----------------------------------------------------------------
         mp1 |   0.01486   -0.32643    0.42281    0.16606   -0.64060    0.14709
         mp2 |  -0.05564    0.41793   -0.53651    0.02727   -0.00799    0.07182
         mp3 |   0.02948   -0.23867    0.38960   -0.49975    0.51874   -0.18340
   ed1change |  -0.18470   -0.20270    0.07610    0.62860    0.27368    0.20474
    change3m |  -0.06030    0.47494    0.38103    0.22026    0.03561   -0.27747
    change6m |  -0.05771    0.48084    0.38311    0.18943    0.01218   -0.27934
   change12m |   0.19449    0.29784    0.27166   -0.06643    0.23052    0.83072
    change3y |   0.53245    0.09136    0.01459   -0.02143   -0.08732    0.03832
    change5y |   0.54583    0.01405   -0.01523    0.05659   -0.04471   -0.10845
   change10y |   0.53607   -0.00657   -0.03935    0.07990   -0.03697   -0.15655
         ndx |   0.21933   -0.25819   -0.08975    0.47743    0.42431   -0.12161

               Eigenvectors
    Variable |      7          8          9         10         11
-------------+------------------------------------------------------
         mp1 |  -0.17486    0.01100    0.47343   -0.00463    0.00477
         mp2 |   0.00127    0.03365    0.72608    0.00915    0.00535
         mp3 |   0.13018    0.02279    0.46838    0.02677    0.01856
   ed1change |   0.62497    0.04247    0.11425    0.03393    0.02137
    change3m |  -0.01798   -0.70368    0.05595   -0.00774   -0.01222
    change6m |  -0.06012    0.70712   -0.01054    0.02420    0.01718
   change12m |  -0.17095   -0.00133   -0.03058   -0.14639   -0.02053
    change3y |   0.18541   -0.02196   -0.01602    0.75386    0.30818
    change5y |   0.19046    0.02569    0.03627   -0.10441   -0.79720
   change10y |   0.15786    0.00947    0.03116   -0.62054    0.51743
         ndx |  -0.65814    0.00047    0.09759    0.10811    0.00702

. 
. *Keep the first two factors, f1 and f2

. score f1 f2
            (based on unrotated principal components)
            (9 scorings not used)

               Scoring coefficients
    Variable |      1          2
-------------+---------------------
         mp1 |   0.01486   -0.32643
         mp2 |  -0.05564    0.41793
         mp3 |   0.02948   -0.23867
   ed1change |  -0.18470   -0.20270
    change3m |  -0.06030    0.47494
    change6m |  -0.05771    0.48084
   change12m |   0.19449    0.29784
    change3y |   0.53245    0.09136
    change5y |   0.54583    0.01405
   change10y |   0.53607   -0.00657
         ndx |   0.21933   -0.25819

. 
. * Do the rotation

. 
. matrix evec = get(Ld)

. scalar a1=evec[1,1]/(evec[1,1]+evec[1,2])

. scalar a2=evec[1,2]/(evec[1,1]+evec[1,2])

. 
. sum f1

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f1 |        127   -5.46e-09    1.790299  -3.663735   16.13608

. scalar vf1=r(sd)^2

. sum f2

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f2 |        127    2.43e-09    1.315818  -3.807915   5.127779

. scalar vf2=r(sd)^2

. 
. scalar b1=-1*a2*vf2/(a1*vf1-a2*vf2)

. scalar b2=a1*vf1/(a1*vf1-a2*vf2)

. 
. 
. *Display weights

. 
. disp a1 a2 b1 b2
-.047694231.0476942.92227651.07772349

. 
. 
. *Generate rotated factors

. 
. gen transfact1=a1*f1+a2*f2
(6 missing values generated)

. gen transfact2=b1*f1+b2*f2
(6 missing values generated)

. 
. *Normalize factors so that transfact1 has coefficient 1 on mp1 IN SAMPLE

. 
. reg mp1 transfact1

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =     28.41
       Model |  .227482891         1  .227482891   Prob > F        =    0.0000
    Residual |  1.00086947       125  .008006956   R-squared       =    0.1852
-------------+----------------------------------   Adj R-squared   =    0.1787
       Total |  1.22835236       126  .009748828   Root MSE        =    .08948

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |  -.0307629   .0057715    -5.33   0.000    -.0421854   -.0193404
       _cons |   .0005709   .0079402     0.07   0.943    -.0151438    .0162855
------------------------------------------------------------------------------

. replace transfact1=transfact1*_b[transfact1]
(127 real changes made)

. 
. *and transfact2 moves ed4 as much as transfact1 does

. 
. reg ed1change transfact1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(2, 124)       =     13.65
       Model |  .000766428         2  .000383214   Prob > F        =    0.0000
    Residual |  .003480123       124  .000028066   R-squared       =    0.1805
-------------+----------------------------------   Adj R-squared   =    0.1673
       Total |  .004246551       126  .000033703   Root MSE        =     .0053

------------------------------------------------------------------------------
   ed1change | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |   .0335785   .0111074     3.02   0.003     .0115938    .0555631
  transfact2 |  -.0012161   .0002853    -4.26   0.000    -.0017807   -.0006514
       _cons |   .0006921   .0004701     1.47   0.143    -.0002383    .0016226
------------------------------------------------------------------------------

. replace transfact2=transfact2*_b[transfact2]/_b[transfact1]
(127 real changes made)

. 
. 
. ***************************************************

. *     Provide labels for outreg                   *

. ****************************************************

. 
. 
. label var mp1 "MP1"

. label var mp2 "MP2"

. label var mp3 "MP3"

. label var ed1change "ED1"

. label var change3m "3Mth"

. label var change6m "6Mth"

. label var change12m "12Mth"

. label var change3y "3Yr"

. label var change5y "5Yr"

. label var change10y "10Yr"

. label var sp "S&P500"

. label var ndx "NASDAQ"

. label var dji "DJIA"

. 
. 
. ****************************

. * Run regressions          *

. * Robust standard errors   *

. ****************************

. 
. 
. reg mp1tight transfact1 if change2ytight~=., r 
change2ytight not found
r(111);

. outreg using factors_fulls_jan262005, replace coefastr se 3aster 
command outreg is unrecognized
r(199);

. reg mp1tight transfact1 transfact2 if change2ytight~=., r 
change2ytight not found
r(111);

. outreg using factors_fulls_jan262005, append coefastr se 3aster 
command outreg is unrecognized
r(199);

. 
. 
. 
. 
. 
. 
. foreach var of varlist mp2tight-changefwdt {
  2. 
. reg `var' transfact1 if change2ytight~=., r 
  3. outreg using factors_fulls_jan262005, append coefastr se 3aster 
  4. reg `var' transfact1 transfact2 if change2ytight~=., r 
  5. outreg using factors_fulls_jan262005, append coefastr se 3aster 
  6. }
variable mp2tight not found
r(111);

. 
. reg spchangetight transfact1, r 
variable spchangetight not found
r(111);

. outreg using factors_fulls_jan262005, append coefastr se 3aster 
command outreg is unrecognized
r(199);

. reg spchangetight transfact1 transfact2, r 
variable spchangetight not found
r(111);

. outreg using factors_fulls_jan262005, append coefastr se 3aster 
command outreg is unrecognized
r(199);

. 
. cls

. *version 8

. *capture log close

. *capture log using gss3_revised_feb012005.log, t replace

. 
. *!date

. 
. *set more off

. * set mem 50m

. 
. import excel "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Pro
> ject/2. Results/1. Clean data/db_clean.xlsx", firstrow clear
(20 vars, 133 obs)

. drop date

. save "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2. 
> Results/1. Clean data/db_clean.dta", replace
file /Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2.
    Results/1. Clean data/db_clean.dta saved

. use "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2. R
> esults/1. Clean data/db_clean.dta", clear

. 
. ***********************************************

. *  Do principal components on eleven variables  *

. ***********************************************

. 
. pca mp1 mp2 mp3 ed1change change3m change6m change12m change3y change5y change10y ndx
(obs=127)
(principal components; 11 components retained)

Component    Eigenvalue     Difference    Proportion    Cumulative
------------------------------------------------------------------
     1        3.20517         1.47380      0.2914         0.2914
     2        1.73138         0.12025      0.1574         0.4488
     3        1.61112         0.46587      0.1465         0.5952
     4        1.14525         0.25379      0.1041         0.6994
     5        0.89146         0.11926      0.0810         0.7804
     6        0.77220         0.12672      0.0702         0.8506
     7        0.64548         0.14822      0.0587         0.9093
     8        0.49726         0.08288      0.0452         0.9545
     9        0.41438         0.33546      0.0377         0.9922
    10        0.07892         0.07154      0.0072         0.9993
    11        0.00738               .      0.0007         1.0000

               Eigenvectors
    Variable |      1          2          3          4          5          6
-------------+-----------------------------------------------------------------
         mp1 |   0.01486   -0.32643    0.42281    0.16606   -0.64060    0.14709
         mp2 |  -0.05564    0.41793   -0.53651    0.02727   -0.00799    0.07182
         mp3 |   0.02948   -0.23867    0.38960   -0.49975    0.51874   -0.18340
   ed1change |  -0.18470   -0.20270    0.07610    0.62860    0.27368    0.20474
    change3m |  -0.06030    0.47494    0.38103    0.22026    0.03561   -0.27747
    change6m |  -0.05771    0.48084    0.38311    0.18943    0.01218   -0.27934
   change12m |   0.19449    0.29784    0.27166   -0.06643    0.23052    0.83072
    change3y |   0.53245    0.09136    0.01459   -0.02143   -0.08732    0.03832
    change5y |   0.54583    0.01405   -0.01523    0.05659   -0.04471   -0.10845
   change10y |   0.53607   -0.00657   -0.03935    0.07990   -0.03697   -0.15655
         ndx |   0.21933   -0.25819   -0.08975    0.47743    0.42431   -0.12161

               Eigenvectors
    Variable |      7          8          9         10         11
-------------+------------------------------------------------------
         mp1 |  -0.17486    0.01100    0.47343   -0.00463    0.00477
         mp2 |   0.00127    0.03365    0.72608    0.00915    0.00535
         mp3 |   0.13018    0.02279    0.46838    0.02677    0.01856
   ed1change |   0.62497    0.04247    0.11425    0.03393    0.02137
    change3m |  -0.01798   -0.70368    0.05595   -0.00774   -0.01222
    change6m |  -0.06012    0.70712   -0.01054    0.02420    0.01718
   change12m |  -0.17095   -0.00133   -0.03058   -0.14639   -0.02053
    change3y |   0.18541   -0.02196   -0.01602    0.75386    0.30818
    change5y |   0.19046    0.02569    0.03627   -0.10441   -0.79720
   change10y |   0.15786    0.00947    0.03116   -0.62054    0.51743
         ndx |  -0.65814    0.00047    0.09759    0.10811    0.00702

. 
. *Keep the first two factors, f1 and f2

. score f1 f2
            (based on unrotated principal components)
            (9 scorings not used)

               Scoring coefficients
    Variable |      1          2
-------------+---------------------
         mp1 |   0.01486   -0.32643
         mp2 |  -0.05564    0.41793
         mp3 |   0.02948   -0.23867
   ed1change |  -0.18470   -0.20270
    change3m |  -0.06030    0.47494
    change6m |  -0.05771    0.48084
   change12m |   0.19449    0.29784
    change3y |   0.53245    0.09136
    change5y |   0.54583    0.01405
   change10y |   0.53607   -0.00657
         ndx |   0.21933   -0.25819

. 
. * Do the rotation

. 
. matrix evec = get(Ld)

. scalar a1=evec[1,1]/(evec[1,1]+evec[1,2])

. scalar a2=evec[1,2]/(evec[1,1]+evec[1,2])

. 
. sum f1

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f1 |        127   -5.46e-09    1.790299  -3.663735   16.13608

. scalar vf1=r(sd)^2

. sum f2

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f2 |        127    2.43e-09    1.315818  -3.807915   5.127779

. scalar vf2=r(sd)^2

. 
. scalar b1=-1*a2*vf2/(a1*vf1-a2*vf2)

. scalar b2=a1*vf1/(a1*vf1-a2*vf2)

. 
. 
. *Display weights

. 
. disp a1 a2 b1 b2
-.047694231.0476942.92227651.07772349

. 
. 
. *Generate rotated factors

. 
. gen transfact1=a1*f1+a2*f2
(6 missing values generated)

. gen transfact2=b1*f1+b2*f2
(6 missing values generated)

. 
. *Normalize factors so that transfact1 has coefficient 1 on mp1 IN SAMPLE

. 
. reg mp1 transfact1

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =     28.41
       Model |  .227482891         1  .227482891   Prob > F        =    0.0000
    Residual |  1.00086947       125  .008006956   R-squared       =    0.1852
-------------+----------------------------------   Adj R-squared   =    0.1787
       Total |  1.22835236       126  .009748828   Root MSE        =    .08948

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |  -.0307629   .0057715    -5.33   0.000    -.0421854   -.0193404
       _cons |   .0005709   .0079402     0.07   0.943    -.0151438    .0162855
------------------------------------------------------------------------------

. replace transfact1=transfact1*_b[transfact1]
(127 real changes made)

. 
. *and transfact2 moves ed4 as much as transfact1 does

. 
. reg ed1change transfact1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(2, 124)       =     13.65
       Model |  .000766428         2  .000383214   Prob > F        =    0.0000
    Residual |  .003480123       124  .000028066   R-squared       =    0.1805
-------------+----------------------------------   Adj R-squared   =    0.1673
       Total |  .004246551       126  .000033703   Root MSE        =     .0053

------------------------------------------------------------------------------
   ed1change | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |   .0335785   .0111074     3.02   0.003     .0115938    .0555631
  transfact2 |  -.0012161   .0002853    -4.26   0.000    -.0017807   -.0006514
       _cons |   .0006921   .0004701     1.47   0.143    -.0002383    .0016226
------------------------------------------------------------------------------

. replace transfact2=transfact2*_b[transfact2]/_b[transfact1]
(127 real changes made)

. 
. 
. ***************************************************

. *     Provide labels for outreg                   *

. ****************************************************

. 
. 
. label var mp1 "MP1"

. label var mp2 "MP2"

. label var mp3 "MP3"

. label var ed1change "ED1"

. label var change3m "3Mth"

. label var change6m "6Mth"

. label var change12m "12Mth"

. label var change3y "3Yr"

. label var change5y "5Yr"

. label var change10y "10Yr"

. label var sp "S&P500"

. label var ndx "NASDAQ"

. label var dji "DJIA"

. 
. 
. ****************************

. * Run regressions          *

. * Robust standard errors   *

. ****************************

. 
. 
. reg mp1tight transfact1 if change2ytight~=., r 
change2ytight not found
r(111);

. outreg2 using factors_fulls_jan262005, replace coefastr se 3aster 
command outreg2 is unrecognized
r(199);

. reg mp1tight transfact1 transfact2 if change2ytight~=., r 
change2ytight not found
r(111);

. outreg2 using factors_fulls_jan262005, append coefastr se 3aster 
command outreg2 is unrecognized
r(199);

. 
. 
. 
. 
. 
. 
. foreach var of varlist mp2tight-changefwdt {
  2. 
. reg `var' transfact1 if change2ytight~=., r 
  3. outreg2 using factors_fulls_jan262005, append coefastr se 3aster 
  4. reg `var' transfact1 transfact2 if change2ytight~=., r 
  5. outreg2 using factors_fulls_jan262005, append coefastr se 3aster 
  6. }
variable mp2tight not found
r(111);

. 
. reg spchangetight transfact1, r 
variable spchangetight not found
r(111);

. outreg2 using factors_fulls_jan262005, append coefastr se 3aster 
command outreg2 is unrecognized
r(199);

. reg spchangetight transfact1 transfact2, r 
variable spchangetight not found
r(111);

. outreg2 using factors_fulls_jan262005, append coefastr se 3aster 
command outreg2 is unrecognized
r(199);

. 
. cls

. 
. ssc install outreg2
checking outreg2 consistency and verifying not already installed...
installing into /Users/eytanrozenblum/Library/Application Support/Stata/ado/plus/...
installation complete.

. 
. import excel "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Pro
> ject/2. Results/1. Clean data/db_clean.xlsx", firstrow clear
(20 vars, 133 obs)

. drop date

. save "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2. 
> Results/1. Clean data/db_clean.dta", replace
file /Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2.
    Results/1. Clean data/db_clean.dta saved

. use "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2. R
> esults/1. Clean data/db_clean.dta", clear

. 
. *************************************************

. *  Do principal components on eleven variables  *

. *************************************************

. 
. pca ed1change change3m change6m change12m change3y change5y change10y ndx
(obs=127)
(principal components; 8 components retained)

Component    Eigenvalue     Difference    Proportion    Cumulative
------------------------------------------------------------------
     1        3.19806         1.51089      0.3998         0.3998
     2        1.68718         0.59986      0.2109         0.6107
     3        1.08732         0.30256      0.1359         0.7466
     4        0.78476         0.12642      0.0981         0.8447
     5        0.65834         0.16117      0.0823         0.9270
     6        0.49717         0.41769      0.0621         0.9891
     7        0.07948         0.07180      0.0099         0.9990
     8        0.00768               .      0.0010         1.0000

               Eigenvectors
    Variable |      1          2          3          4          5          6
-------------+-----------------------------------------------------------------
   ed1change |  -0.18841   -0.12378    0.73562    0.18997    0.60792    0.03280
    change3m |  -0.05918    0.60929    0.22619   -0.27152   -0.04418   -0.70582
    change6m |  -0.05654    0.61526    0.19039   -0.27504   -0.07655    0.70687
   change12m |   0.19455    0.39545    0.00703    0.87560   -0.13356    0.00096
    change3y |   0.53409    0.08209   -0.05571    0.00651    0.20118   -0.02182
    change5y |   0.54674    0.00091    0.04497   -0.12886    0.18569    0.02322
   change10y |   0.53713   -0.02951    0.06657   -0.17504    0.14813    0.00707
         ndx |   0.21743   -0.26629    0.60154   -0.02379   -0.71266   -0.00300

               Eigenvectors
    Variable |      7          8
-------------+---------------------
   ed1change |   0.03031    0.01982
    change3m |  -0.00876   -0.01289
    change6m |   0.02361    0.01665
   change12m |  -0.14442   -0.01853
    change3y |   0.75569    0.30470
    change5y |  -0.10942   -0.79716
   change10y |  -0.61893    0.52008
         ndx |   0.10711    0.00581

. 
. * Keep the first two factors, f1 and f2

. score f1 f2
            (based on unrotated principal components)
            (6 scorings not used)

               Scoring coefficients
    Variable |      1          2
-------------+---------------------
   ed1change |  -0.18841   -0.12378
    change3m |  -0.05918    0.60929
    change6m |  -0.05654    0.61526
   change12m |   0.19455    0.39545
    change3y |   0.53409    0.08209
    change5y |   0.54674    0.00091
   change10y |   0.53713   -0.02951
         ndx |   0.21743   -0.26629

. 
. * Do the rotation

. 
. matrix evec = get(Ld)

. scalar a1=evec[1,1]/(evec[1,1]+evec[1,2])

. scalar a2=evec[1,2]/(evec[1,1]+evec[1,2])

. 
. sum f1

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f1 |        127    5.26e-09    1.788313  -3.671002    16.1229

. scalar vf1=r(sd)^2

. sum f2

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f2 |        127    7.96e-10    1.298915  -2.926375   6.498649

. scalar vf2=r(sd)^2

. 
. scalar b1=-1*a2*vf2/(a1*vf1-a2*vf2)

. scalar b2=a1*vf1/(a1*vf1-a2*vf2)

. 
. 
. *Display weights

. 
. disp a1 a2 b1 b2
.60350423.39649577-.530462961.530463

. 
. 
. *Generate rotated factors

. 
. gen transfact1=a1*f1+a2*f2
(6 missing values generated)

. gen transfact2=b1*f1+b2*f2
(6 missing values generated)

. 
. 
. *Normalize factors so that transfact1 has coefficient 1 on mp1 IN SAMPLE

. 
. *reg mp1 transfact1

. *replace transfact1=transfact1*_b[transfact1]

. 
. *and transfact2 moves ed4 as much as transfact1 does

. 
. *reg ed1change transfact1 transfact2

. *replace transfact2=transfact2*_b[transfact2]/_b[transfact1]

. 
. 
. *******************************

. *  Provide labels for outreg  *

. *******************************

. 
. label var mp1 "MP1"

. label var mp2 "MP2"

. label var mp3 "MP3"

. label var ed1change "ED1"

. label var change3m "3Mth"

. label var change6m "6Mth"

. label var change12m "12Mth"

. label var change3y "3Yr"

. label var change5y "5Yr"

. label var change10y "10Yr"

. label var sp "S&P500"

. label var ndx "NASDAQ"

. label var dji "DJIA"

. 
. 
. ****************************

. * Run regressions          *

. * Robust standard errors   *

. ****************************

. 
. 
. reg mp1 transfact1

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.01
       Model |  .000087273         1  .000087273   Prob > F        =    0.9251
    Residual |  1.22826509       125  .009826121   R-squared       =    0.0001
-------------+----------------------------------   Adj R-squared   =   -0.0079
       Total |  1.22835236       126  .009748828   Root MSE        =    .09913

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |   -.000696   .0073847    -0.09   0.925    -.0153112    .0139193
       _cons |   .0005709   .0087961     0.06   0.948    -.0168377    .0179794
------------------------------------------------------------------------------

. outreg2 using "db_clean.dta"
/Users/eytanrozenblum/Library/Application Support/Stata/ado/plus/o/outreg2.ado
dir : seeout

.     addstat(N, r(N) fmt(3), "Adjusted R-squared", e(r2_a) fmt(3)) ///
command addstat is unrecognized
r(199);

.     starlevels(* 0.1 ** 0.05 *** 0.01) ///
command starlevels is unrecognized
r(199);

.     cdec(3)  // Coefficients and SEs with three decimals
command cdec is unrecognized
r(199);

. 
. 
. reg mp1 transfact1 transfact2 

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(2, 124)       =      0.04
       Model |  .000860011         2  .000430006   Prob > F        =    0.9575
    Residual |  1.22749235       124  .009899132   R-squared       =    0.0007
-------------+----------------------------------   Adj R-squared   =   -0.0154
       Total |  1.22835236       126  .009748828   Root MSE        =    .09949

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |   -.000696   .0074121    -0.09   0.925    -.0153666    .0139746
  transfact2 |  -.0011243    .004024    -0.28   0.780     -.009089    .0068404
       _cons |   .0005709   .0088287     0.06   0.949    -.0169036    .0180453
------------------------------------------------------------------------------

. outreg2 using factors_fulls_jan262005, append coefastr se 3aster 
option 3aster not allowed
r(198);

. 
. 
. 
. 
. 
. 
. foreach var of varlist mp2tight-changefwdt {
  2. 
. reg `var' transfact1 if change2ytight~=., r 
  3. outreg2 using factors_fulls_jan262005, append coefastr se 3aster 
  4. reg `var' transfact1 transfact2 if change2ytight~=., r 
  5. outreg2 using factors_fulls_jan262005, append coefastr se 3aster 
  6. }
variable mp2tight not found
r(111);

. 
. reg spchangetight transfact1, r 
variable spchangetight not found
r(111);

. outreg2 using factors_fulls_jan262005, append coefastr se 3aster 
option 3aster not allowed
r(198);

. reg spchangetight transfact1 transfact2, r 
variable spchangetight not found
r(111);

. outreg2 using factors_fulls_jan262005, append coefastr se 3aster 
option 3aster not allowed
r(198);

. 
. seeout using "db_clean.dta"
Hit Enter to continue. cls

. 
. ssc install outreg2
checking outreg2 consistency and verifying not already installed...
all files already exist and are up to date.

. 
. import excel "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Pro
> ject/2. Results/1. Clean data/db_clean.xlsx", firstrow clear
(20 vars, 133 obs)

. drop date

. save "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2. 
> Results/1. Clean data/db_clean.dta", replace
file /Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2.
    Results/1. Clean data/db_clean.dta saved

. use "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2. R
> esults/1. Clean data/db_clean.dta", clear

. 
. *************************************************

. *  Do principal components on eleven variables  *

. *************************************************

. 
. pca ed1change change3m change6m change12m change3y change5y change10y ndx
(obs=127)
(principal components; 8 components retained)

Component    Eigenvalue     Difference    Proportion    Cumulative
------------------------------------------------------------------
     1        3.19806         1.51089      0.3998         0.3998
     2        1.68718         0.59986      0.2109         0.6107
     3        1.08732         0.30256      0.1359         0.7466
     4        0.78476         0.12642      0.0981         0.8447
     5        0.65834         0.16117      0.0823         0.9270
     6        0.49717         0.41769      0.0621         0.9891
     7        0.07948         0.07180      0.0099         0.9990
     8        0.00768               .      0.0010         1.0000

               Eigenvectors
    Variable |      1          2          3          4          5          6
-------------+-----------------------------------------------------------------
   ed1change |  -0.18841   -0.12378    0.73562    0.18997    0.60792    0.03280
    change3m |  -0.05918    0.60929    0.22619   -0.27152   -0.04418   -0.70582
    change6m |  -0.05654    0.61526    0.19039   -0.27504   -0.07655    0.70687
   change12m |   0.19455    0.39545    0.00703    0.87560   -0.13356    0.00096
    change3y |   0.53409    0.08209   -0.05571    0.00651    0.20118   -0.02182
    change5y |   0.54674    0.00091    0.04497   -0.12886    0.18569    0.02322
   change10y |   0.53713   -0.02951    0.06657   -0.17504    0.14813    0.00707
         ndx |   0.21743   -0.26629    0.60154   -0.02379   -0.71266   -0.00300

               Eigenvectors
    Variable |      7          8
-------------+---------------------
   ed1change |   0.03031    0.01982
    change3m |  -0.00876   -0.01289
    change6m |   0.02361    0.01665
   change12m |  -0.14442   -0.01853
    change3y |   0.75569    0.30470
    change5y |  -0.10942   -0.79716
   change10y |  -0.61893    0.52008
         ndx |   0.10711    0.00581

. 
. * Keep the first two factors, f1 and f2

. score f1 f2
            (based on unrotated principal components)
            (6 scorings not used)

               Scoring coefficients
    Variable |      1          2
-------------+---------------------
   ed1change |  -0.18841   -0.12378
    change3m |  -0.05918    0.60929
    change6m |  -0.05654    0.61526
   change12m |   0.19455    0.39545
    change3y |   0.53409    0.08209
    change5y |   0.54674    0.00091
   change10y |   0.53713   -0.02951
         ndx |   0.21743   -0.26629

. 
. * Do the rotation

. 
. matrix evec = get(Ld)

. scalar a1=evec[1,1]/(evec[1,1]+evec[1,2])

. scalar a2=evec[1,2]/(evec[1,1]+evec[1,2])

. 
. sum f1

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f1 |        127    5.26e-09    1.788313  -3.671002    16.1229

. scalar vf1=r(sd)^2

. sum f2

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f2 |        127    7.96e-10    1.298915  -2.926375   6.498649

. scalar vf2=r(sd)^2

. 
. scalar b1=-1*a2*vf2/(a1*vf1-a2*vf2)

. scalar b2=a1*vf1/(a1*vf1-a2*vf2)

. 
. 
. *Display weights

. 
. disp a1 a2 b1 b2
.60350423.39649577-.530462961.530463

. 
. 
. *Generate rotated factors

. 
. gen transfact1=a1*f1+a2*f2
(6 missing values generated)

. gen transfact2=b1*f1+b2*f2
(6 missing values generated)

. 
. 
. *Normalize factors so that transfact1 has coefficient 1 on mp1 IN SAMPLE

. 
. *reg mp1 transfact1

. *replace transfact1=transfact1*_b[transfact1]

. 
. *and transfact2 moves ed4 as much as transfact1 does

. 
. *reg ed1change transfact1 transfact2

. *replace transfact2=transfact2*_b[transfact2]/_b[transfact1]

. 
. 
. *******************************

. *  Provide labels for outreg  *

. *******************************

. 
. label var mp1 "MP1"

. label var mp2 "MP2"

. label var mp3 "MP3"

. label var ed1change "ED1"

. label var change3m "3Mth"

. label var change6m "6Mth"

. label var change12m "12Mth"

. label var change3y "3Yr"

. label var change5y "5Yr"

. label var change10y "10Yr"

. label var sp "S&P500"

. label var ndx "NASDAQ"

. label var dji "DJIA"

. 
. 
. *****************

. *  Regressions  * 

. *****************

. 
. 
. reg mp1 transfact1

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.01
       Model |  .000087273         1  .000087273   Prob > F        =    0.9251
    Residual |  1.22826509       125  .009826121   R-squared       =    0.0001
-------------+----------------------------------   Adj R-squared   =   -0.0079
       Total |  1.22835236       126  .009748828   Root MSE        =    .09913

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |   -.000696   .0073847    -0.09   0.925    -.0153112    .0139193
       _cons |   .0005709   .0087961     0.06   0.948    -.0168377    .0179794
------------------------------------------------------------------------------

. reg mp1 transfact1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(2, 124)       =      0.04
       Model |  .000860011         2  .000430006   Prob > F        =    0.9575
    Residual |  1.22749235       124  .009899132   R-squared       =    0.0007
-------------+----------------------------------   Adj R-squared   =   -0.0154
       Total |  1.22835236       126  .009748828   Root MSE        =    .09949

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |   -.000696   .0074121    -0.09   0.925    -.0153666    .0139746
  transfact2 |  -.0011243    .004024    -0.28   0.780     -.009089    .0068404
       _cons |   .0005709   .0088287     0.06   0.949    -.0169036    .0180453
------------------------------------------------------------------------------

. reg mp1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.08
       Model |  .000772738         1  .000772738   Prob > F        =    0.7796
    Residual |  1.22757962       125  .009820637   R-squared       =    0.0006
-------------+----------------------------------   Adj R-squared   =   -0.0074
       Total |  1.22835236       126  .009748828   Root MSE        =     .0991

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact2 |  -.0011243    .004008    -0.28   0.780    -.0090567    .0068081
       _cons |   .0005709   .0087936     0.06   0.948    -.0168328    .0179745
------------------------------------------------------------------------------

. 
. reg mp2 transfact1

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.12
       Model |  .015433989         1  .015433989   Prob > F        =    0.7269
    Residual |  15.7500631       125  .126000505   R-squared       =    0.0010
-------------+----------------------------------   Adj R-squared   =   -0.0070
       Total |  15.7654971       126  .125122993   Root MSE        =    .35497

------------------------------------------------------------------------------
         mp2 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |  -.0092551   .0264441    -0.35   0.727    -.0615912     .043081
       _cons |  -.0357884   .0314981    -1.14   0.258     -.098127    .0265503
------------------------------------------------------------------------------

. reg mp2 transfact1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(2, 124)       =      0.36
       Model |  .090747341         2  .045373671   Prob > F        =    0.6991
    Residual |  15.6747498       124  .126409273   R-squared       =    0.0058
-------------+----------------------------------   Adj R-squared   =   -0.0103
       Total |  15.7654971       126  .125122993   Root MSE        =    .35554

------------------------------------------------------------------------------
         mp2 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |  -.0092551   .0264869    -0.35   0.727    -.0616801    .0431699
  transfact2 |   .0110994   .0143798     0.77   0.442    -.0173622     .039561
       _cons |  -.0357884   .0315491    -1.13   0.259     -.098233    .0266562
------------------------------------------------------------------------------

. reg mp2 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.60
       Model |  .075313352         1  .075313352   Prob > F        =    0.4400
    Residual |  15.6901838       125   .12552147   R-squared       =    0.0048
-------------+----------------------------------   Adj R-squared   =   -0.0032
       Total |  15.7654971       126  .125122993   Root MSE        =    .35429

------------------------------------------------------------------------------
         mp2 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact2 |   .0110994   .0143292     0.77   0.440    -.0172599    .0394586
       _cons |  -.0357884   .0314382    -1.14   0.257    -.0980084    .0264317
------------------------------------------------------------------------------

. 
. reg mp3 transfact1

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.07
       Model |  .036916415         1  .036916415   Prob > F        =    0.7880
    Residual |  63.5390432       125  .508312345   R-squared       =    0.0006
-------------+----------------------------------   Adj R-squared   =   -0.0074
       Total |  63.5759596       126  .504571108   Root MSE        =    .71296

------------------------------------------------------------------------------
         mp3 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |   .0143137   .0531138     0.27   0.788    -.0908051    .1194325
       _cons |   .0107809    .063265     0.17   0.865    -.1144283    .1359902
------------------------------------------------------------------------------

. reg mp3 transfact1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(2, 124)       =      0.04
       Model |  .037883483         2  .018941742   Prob > F        =    0.9637
    Residual |  63.5380761       124  .512403839   R-squared       =    0.0006
-------------+----------------------------------   Adj R-squared   =   -0.0155
       Total |  63.5759596       126  .504571108   Root MSE        =    .71582

------------------------------------------------------------------------------
         mp3 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |   .0143137   .0533271     0.27   0.789    -.0912356     .119863
  transfact2 |  -.0012577   .0289513    -0.04   0.965    -.0585606    .0560451
       _cons |   .0107809   .0635191     0.17   0.866    -.1149412     .136503
------------------------------------------------------------------------------

. reg mp3 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.00
       Model |  .000967068         1  .000967068   Prob > F        =    0.9653
    Residual |  63.5749925       125   .50859994   R-squared       =    0.0000
-------------+----------------------------------   Adj R-squared   =   -0.0080
       Total |  63.5759596       126  .504571108   Root MSE        =    .71316

------------------------------------------------------------------------------
         mp3 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact2 |  -.0012577   .0288437    -0.04   0.965     -.058343    .0558275
       _cons |   .0107809   .0632829     0.17   0.865    -.1144638    .1360256
------------------------------------------------------------------------------

. cls

. 
. ssc install outreg2
checking outreg2 consistency and verifying not already installed...
all files already exist and are up to date.

. 
. import excel "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Pro
> ject/2. Results/1. Clean data/db_clean.xlsx", firstrow clear
(20 vars, 133 obs)

. drop date

. save "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2. 
> Results/1. Clean data/db_clean.dta", replace
file /Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2.
    Results/1. Clean data/db_clean.dta saved

. use "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2. R
> esults/1. Clean data/db_clean.dta", clear

. 
. *************************************************

. *  Do principal components on eleven variables  *

. *************************************************

. 
. pca ed1change change3m change6m change12m change3y change5y change10y ndx
(obs=127)
(principal components; 8 components retained)

Component    Eigenvalue     Difference    Proportion    Cumulative
------------------------------------------------------------------
     1        3.19806         1.51089      0.3998         0.3998
     2        1.68718         0.59986      0.2109         0.6107
     3        1.08732         0.30256      0.1359         0.7466
     4        0.78476         0.12642      0.0981         0.8447
     5        0.65834         0.16117      0.0823         0.9270
     6        0.49717         0.41769      0.0621         0.9891
     7        0.07948         0.07180      0.0099         0.9990
     8        0.00768               .      0.0010         1.0000

               Eigenvectors
    Variable |      1          2          3          4          5          6
-------------+-----------------------------------------------------------------
   ed1change |  -0.18841   -0.12378    0.73562    0.18997    0.60792    0.03280
    change3m |  -0.05918    0.60929    0.22619   -0.27152   -0.04418   -0.70582
    change6m |  -0.05654    0.61526    0.19039   -0.27504   -0.07655    0.70687
   change12m |   0.19455    0.39545    0.00703    0.87560   -0.13356    0.00096
    change3y |   0.53409    0.08209   -0.05571    0.00651    0.20118   -0.02182
    change5y |   0.54674    0.00091    0.04497   -0.12886    0.18569    0.02322
   change10y |   0.53713   -0.02951    0.06657   -0.17504    0.14813    0.00707
         ndx |   0.21743   -0.26629    0.60154   -0.02379   -0.71266   -0.00300

               Eigenvectors
    Variable |      7          8
-------------+---------------------
   ed1change |   0.03031    0.01982
    change3m |  -0.00876   -0.01289
    change6m |   0.02361    0.01665
   change12m |  -0.14442   -0.01853
    change3y |   0.75569    0.30470
    change5y |  -0.10942   -0.79716
   change10y |  -0.61893    0.52008
         ndx |   0.10711    0.00581

. 
. * Keep the first two factors, f1 and f2

. score f1 f2
            (based on unrotated principal components)
            (6 scorings not used)

               Scoring coefficients
    Variable |      1          2
-------------+---------------------
   ed1change |  -0.18841   -0.12378
    change3m |  -0.05918    0.60929
    change6m |  -0.05654    0.61526
   change12m |   0.19455    0.39545
    change3y |   0.53409    0.08209
    change5y |   0.54674    0.00091
   change10y |   0.53713   -0.02951
         ndx |   0.21743   -0.26629

. 
. * Do the rotation

. 
. matrix evec = get(Ld)

. scalar a1=evec[1,1]/(evec[1,1]+evec[1,2])

. scalar a2=evec[1,2]/(evec[1,1]+evec[1,2])

. 
. sum f1

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f1 |        127    5.26e-09    1.788313  -3.671002    16.1229

. scalar vf1=r(sd)^2

. sum f2

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f2 |        127    7.96e-10    1.298915  -2.926375   6.498649

. scalar vf2=r(sd)^2

. 
. scalar b1=-1*a2*vf2/(a1*vf1-a2*vf2)

. scalar b2=a1*vf1/(a1*vf1-a2*vf2)

. 
. 
. *Display weights

. 
. disp a1 a2 b1 b2
.60350423.39649577-.530462961.530463

. 
. 
. *Generate rotated factors

. 
. gen transfact1=a1*f1+a2*f2
(6 missing values generated)

. gen transfact2=b1*f1+b2*f2
(6 missing values generated)

. 
. 
. *Normalize factors so that transfact1 has coefficient 1 on mp1 IN SAMPLE

. 
. reg mp1 transfact1

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.01
       Model |  .000087273         1  .000087273   Prob > F        =    0.9251
    Residual |  1.22826509       125  .009826121   R-squared       =    0.0001
-------------+----------------------------------   Adj R-squared   =   -0.0079
       Total |  1.22835236       126  .009748828   Root MSE        =    .09913

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |   -.000696   .0073847    -0.09   0.925    -.0153112    .0139193
       _cons |   .0005709   .0087961     0.06   0.948    -.0168377    .0179794
------------------------------------------------------------------------------

. replace transfact1=transfact1*_b[transfact1]
(127 real changes made)

. 
. * And transfact2 moves ndx as much as transfact1 does

. 
. reg ndx transfact1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(2, 124)       =     23.03
       Model |  .009276017         2  .004638009   Prob > F        =    0.0000
    Residual |  .024974303       124  .000201406   R-squared       =    0.2708
-------------+----------------------------------   Adj R-squared   =    0.2591
       Total |   .03425032       126  .000271828   Root MSE        =    .01419

------------------------------------------------------------------------------
         ndx | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |  -4.000954   1.519132    -2.63   0.010    -7.007742    -.994167
  transfact2 |    -.00359    .000574    -6.25   0.000    -.0047261    -.002454
       _cons |   .0035029   .0012593     2.78   0.006     .0010103    .0059954
------------------------------------------------------------------------------

. replace transfact2=transfact2*_b[transfact2]/_b[transfact1]
(127 real changes made)

. 
. *****************

. *  Regressions  * 

. *****************

. 
. 
. reg mp1 transfact1

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.01
       Model |  .000087273         1  .000087273   Prob > F        =    0.9251
    Residual |  1.22826509       125  .009826121   R-squared       =    0.0001
-------------+----------------------------------   Adj R-squared   =   -0.0079
       Total |  1.22835236       126  .009748828   Root MSE        =    .09913

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |          1   10.61086     0.09   0.925    -20.00021    22.00021
       _cons |   .0005709   .0087961     0.06   0.948    -.0168377    .0179794
------------------------------------------------------------------------------

. reg mp1 transfact1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(2, 124)       =      0.04
       Model |  .000860011         2  .000430006   Prob > F        =    0.9575
    Residual |  1.22749235       124  .009899132   R-squared       =    0.0007
-------------+----------------------------------   Adj R-squared   =   -0.0154
       Total |  1.22835236       126  .009748828   Root MSE        =    .09949

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |   .9999999   10.65021     0.09   0.925    -20.07975    22.07975
  transfact2 |  -1.252982   4.484636    -0.28   0.780    -10.12933    7.623368
       _cons |   .0005709   .0088287     0.06   0.949    -.0169036    .0180453
------------------------------------------------------------------------------

. reg mp1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.08
       Model |  .000772738         1  .000772738   Prob > F        =    0.7796
    Residual |  1.22757962       125  .009820637   R-squared       =    0.0006
-------------+----------------------------------   Adj R-squared   =   -0.0074
       Total |  1.22835236       126  .009748828   Root MSE        =     .0991

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact2 |  -1.252982    4.46682    -0.28   0.780    -10.09337    7.587409
       _cons |   .0005709   .0087936     0.06   0.948    -.0168328    .0179745
------------------------------------------------------------------------------

. 
. reg mp2 transfact1

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.12
       Model |   .01543399         1   .01543399   Prob > F        =    0.7269
    Residual |  15.7500631       125  .126000505   R-squared       =    0.0010
-------------+----------------------------------   Adj R-squared   =   -0.0070
       Total |  15.7654971       126  .125122993   Root MSE        =    .35497

------------------------------------------------------------------------------
         mp2 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |   13.29838   37.99669     0.35   0.727    -61.90178    88.49854
       _cons |  -.0357884   .0314981    -1.14   0.258     -.098127    .0265503
------------------------------------------------------------------------------

. reg mp2 transfact1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(2, 124)       =      0.36
       Model |   .09074734         2   .04537367   Prob > F        =    0.6991
    Residual |  15.6747498       124  .126409273   R-squared       =    0.0058
-------------+----------------------------------   Adj R-squared   =   -0.0103
       Total |  15.7654971       126  .125122993   Root MSE        =    .35554

------------------------------------------------------------------------------
         mp2 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |   13.29838   38.05827     0.35   0.727     -62.0296    88.62636
  transfact2 |   12.36985   16.02574     0.77   0.442    -19.34957    44.08928
       _cons |  -.0357884   .0315491    -1.13   0.259     -.098233    .0266562
------------------------------------------------------------------------------

. reg mp2 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.60
       Model |   .07531335         1   .07531335   Prob > F        =    0.4400
    Residual |  15.6901838       125   .12552147   R-squared       =    0.0048
-------------+----------------------------------   Adj R-squared   =   -0.0032
       Total |  15.7654971       126  .125122993   Root MSE        =    .35429

------------------------------------------------------------------------------
         mp2 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact2 |   12.36985   15.96936     0.77   0.440     -19.2355    43.97521
       _cons |  -.0357884   .0314382    -1.14   0.257    -.0980084    .0264317
------------------------------------------------------------------------------

. 
. reg mp3 transfact1

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.07
       Model |  .036916416         1  .036916416   Prob > F        =    0.7880
    Residual |  63.5390432       125  .508312345   R-squared       =    0.0006
-------------+----------------------------------   Adj R-squared   =   -0.0074
       Total |  63.5759596       126  .504571108   Root MSE        =    .71296

------------------------------------------------------------------------------
         mp3 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |  -20.56693   76.31764    -0.27   0.788     -171.609    130.4752
       _cons |   .0107809    .063265     0.17   0.865    -.1144283    .1359902
------------------------------------------------------------------------------

. reg mp3 transfact1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(2, 124)       =      0.04
       Model |  .037883484         2  .018941742   Prob > F        =    0.9637
    Residual |  63.5380761       124  .512403839   R-squared       =    0.0006
-------------+----------------------------------   Adj R-squared   =   -0.0155
       Total |  63.5759596       126  .504571108   Root MSE        =    .71582

------------------------------------------------------------------------------
         mp3 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |  -20.56693   76.62417    -0.27   0.789    -172.2276    131.0938
  transfact2 |  -1.401707   32.26523    -0.04   0.965    -65.26364    62.46023
       _cons |   .0107809   .0635191     0.17   0.866    -.1149412     .136503
------------------------------------------------------------------------------

. reg mp3 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.00
       Model |  .000967068         1  .000967068   Prob > F        =    0.9653
    Residual |  63.5749925       125   .50859994   R-squared       =    0.0000
-------------+----------------------------------   Adj R-squared   =   -0.0080
       Total |  63.5759596       126  .504571108   Root MSE        =    .71316

------------------------------------------------------------------------------
         mp3 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact2 |  -1.401707   32.14525    -0.04   0.965    -65.02114    62.21773
       _cons |   .0107809   .0632829     0.17   0.865    -.1144638    .1360256
------------------------------------------------------------------------------

. cls

. 
. import excel "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Pro
> ject/2. Results/1. Clean data/db_clean.xlsx", firstrow clear
(20 vars, 133 obs)

. drop date

. save "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2. 
> Results/1. Clean data/db_clean.dta", replace
file /Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2.
    Results/1. Clean data/db_clean.dta saved

. use "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2. R
> esults/1. Clean data/db_clean.dta", clear

. 
. *************************************************

. *  Do principal components on eleven variables  *

. *************************************************

. 
. pca mp1 mp2 mp3 ed1change change3m change6m change12m change3y change5y change10y ndx
(obs=127)
(principal components; 11 components retained)

Component    Eigenvalue     Difference    Proportion    Cumulative
------------------------------------------------------------------
     1        3.20517         1.47380      0.2914         0.2914
     2        1.73138         0.12025      0.1574         0.4488
     3        1.61112         0.46587      0.1465         0.5952
     4        1.14525         0.25379      0.1041         0.6994
     5        0.89146         0.11926      0.0810         0.7804
     6        0.77220         0.12672      0.0702         0.8506
     7        0.64548         0.14822      0.0587         0.9093
     8        0.49726         0.08288      0.0452         0.9545
     9        0.41438         0.33546      0.0377         0.9922
    10        0.07892         0.07154      0.0072         0.9993
    11        0.00738               .      0.0007         1.0000

               Eigenvectors
    Variable |      1          2          3          4          5          6
-------------+-----------------------------------------------------------------
         mp1 |   0.01486   -0.32643    0.42281    0.16606   -0.64060    0.14709
         mp2 |  -0.05564    0.41793   -0.53651    0.02727   -0.00799    0.07182
         mp3 |   0.02948   -0.23867    0.38960   -0.49975    0.51874   -0.18340
   ed1change |  -0.18470   -0.20270    0.07610    0.62860    0.27368    0.20474
    change3m |  -0.06030    0.47494    0.38103    0.22026    0.03561   -0.27747
    change6m |  -0.05771    0.48084    0.38311    0.18943    0.01218   -0.27934
   change12m |   0.19449    0.29784    0.27166   -0.06643    0.23052    0.83072
    change3y |   0.53245    0.09136    0.01459   -0.02143   -0.08732    0.03832
    change5y |   0.54583    0.01405   -0.01523    0.05659   -0.04471   -0.10845
   change10y |   0.53607   -0.00657   -0.03935    0.07990   -0.03697   -0.15655
         ndx |   0.21933   -0.25819   -0.08975    0.47743    0.42431   -0.12161

               Eigenvectors
    Variable |      7          8          9         10         11
-------------+------------------------------------------------------
         mp1 |  -0.17486    0.01100    0.47343   -0.00463    0.00477
         mp2 |   0.00127    0.03365    0.72608    0.00915    0.00535
         mp3 |   0.13018    0.02279    0.46838    0.02677    0.01856
   ed1change |   0.62497    0.04247    0.11425    0.03393    0.02137
    change3m |  -0.01798   -0.70368    0.05595   -0.00774   -0.01222
    change6m |  -0.06012    0.70712   -0.01054    0.02420    0.01718
   change12m |  -0.17095   -0.00133   -0.03058   -0.14639   -0.02053
    change3y |   0.18541   -0.02196   -0.01602    0.75386    0.30818
    change5y |   0.19046    0.02569    0.03627   -0.10441   -0.79720
   change10y |   0.15786    0.00947    0.03116   -0.62054    0.51743
         ndx |  -0.65814    0.00047    0.09759    0.10811    0.00702

. 
. * Keep the first two factors, f1 and f2

. score f1 f2
            (based on unrotated principal components)
            (9 scorings not used)

               Scoring coefficients
    Variable |      1          2
-------------+---------------------
         mp1 |   0.01486   -0.32643
         mp2 |  -0.05564    0.41793
         mp3 |   0.02948   -0.23867
   ed1change |  -0.18470   -0.20270
    change3m |  -0.06030    0.47494
    change6m |  -0.05771    0.48084
   change12m |   0.19449    0.29784
    change3y |   0.53245    0.09136
    change5y |   0.54583    0.01405
   change10y |   0.53607   -0.00657
         ndx |   0.21933   -0.25819

. 
. * Do the rotation

. 
. matrix evec = get(Ld)

. scalar a1=evec[1,1]/(evec[1,1]+evec[1,2])

. scalar a2=evec[1,2]/(evec[1,1]+evec[1,2])

. 
. sum f1

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f1 |        127   -5.46e-09    1.790299  -3.663735   16.13608

. scalar vf1=r(sd)^2

. sum f2

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f2 |        127    2.43e-09    1.315818  -3.807915   5.127779

. scalar vf2=r(sd)^2

. 
. scalar b1=-1*a2*vf2/(a1*vf1-a2*vf2)

. scalar b2=a1*vf1/(a1*vf1-a2*vf2)

. 
. 
. *Display weights

. 
. disp a1 a2 b1 b2
-.047694231.0476942.92227651.07772349

. 
. 
. *Generate rotated factors

. 
. gen transfact1=a1*f1+a2*f2
(6 missing values generated)

. gen transfact2=b1*f1+b2*f2
(6 missing values generated)

. 
. 
. *Normalize factors so that transfact1 has coefficient 1 on mp1 IN SAMPLE

. 
. reg mp1 transfact1

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =     28.41
       Model |  .227482891         1  .227482891   Prob > F        =    0.0000
    Residual |  1.00086947       125  .008006956   R-squared       =    0.1852
-------------+----------------------------------   Adj R-squared   =    0.1787
       Total |  1.22835236       126  .009748828   Root MSE        =    .08948

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |  -.0307629   .0057715    -5.33   0.000    -.0421854   -.0193404
       _cons |   .0005709   .0079402     0.07   0.943    -.0151438    .0162855
------------------------------------------------------------------------------

. replace transfact1=transfact1*_b[transfact1]
(127 real changes made)

. 
. * And transfact2 moves ndx as much as transfact1 does

. 
. reg ndx transfact1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(2, 124)       =     22.88
       Model |  .009233837         2  .004616918   Prob > F        =    0.0000
    Residual |  .025016483       124  .000201746   R-squared       =    0.2696
-------------+----------------------------------   Adj R-squared   =    0.2578
       Total |   .03425032       126  .000271828   Root MSE        =     .0142

------------------------------------------------------------------------------
         ndx | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |    .140991   .0297802     4.73   0.000     .0820476    .1999344
  transfact2 |   .0036965   .0007649     4.83   0.000     .0021826    .0052104
       _cons |   .0035029   .0012604     2.78   0.006     .0010082    .0059975
------------------------------------------------------------------------------

. replace transfact2=transfact2*_b[transfact2]/_b[transfact1]
(127 real changes made)

. 
. *****************

. *  Regressions  * 

. *****************

. 
. 
. reg mp1 transfact1

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =     28.41
       Model |  .227482899         1  .227482899   Prob > F        =    0.0000
    Residual |  1.00086946       125  .008006956   R-squared       =    0.1852
-------------+----------------------------------   Adj R-squared   =    0.1787
       Total |  1.22835236       126  .009748828   Root MSE        =    .08948

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |          1   .1876115     5.33   0.000     .6286937    1.371306
       _cons |   .0005709   .0079402     0.07   0.943    -.0151438    .0162855
------------------------------------------------------------------------------

. reg mp1 transfact1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(2, 124)       =     14.09
       Model |  .227482899         2  .113741449   Prob > F        =    0.0000
    Residual |  1.00086946       124  .008071528   R-squared       =    0.1852
-------------+----------------------------------   Adj R-squared   =    0.1721
       Total |  1.22835236       126  .009748828   Root MSE        =    .08984

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |          1   .1883664     5.31   0.000     .6271701     1.37283
  transfact2 |   2.61e-09   .1845332     0.00   1.000     -.365243     .365243
       _cons |   .0005709   .0079722     0.07   0.943    -.0152083      .01635
------------------------------------------------------------------------------

. reg mp1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.00
       Model |           0         1           0   Prob > F        =    1.0000
    Residual |  1.22835236       125  .009826819   R-squared       =    0.0000
-------------+----------------------------------   Adj R-squared   =   -0.0080
       Total |  1.22835236       126  .009748828   Root MSE        =    .09913

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact2 |   1.49e-09   .2036119     0.00   1.000    -.4029733    .4029733
       _cons |   .0005709   .0087964     0.06   0.948    -.0168383      .01798
------------------------------------------------------------------------------

. 
. reg mp2 transfact1

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =     55.65
       Model |  4.85660697         1  4.85660697   Prob > F        =    0.0000
    Residual |  10.9088902       125  .087271121   R-squared       =    0.3081
-------------+----------------------------------   Adj R-squared   =    0.3025
       Total |  15.7654971       126  .125122993   Root MSE        =    .29542

------------------------------------------------------------------------------
         mp2 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |  -4.620533   .6193853    -7.46   0.000    -5.846374   -3.394693
       _cons |  -.0357884    .026214    -1.37   0.175    -.0876691    .0160924
------------------------------------------------------------------------------

. reg mp2 transfact1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(2, 124)       =     28.16
       Model |  4.92409611         2  2.46204806   Prob > F        =    0.0000
    Residual |   10.841401       124  .087430653   R-squared       =    0.3123
-------------+----------------------------------   Adj R-squared   =    0.3012
       Total |  15.7654971       126  .125122993   Root MSE        =    .29569

------------------------------------------------------------------------------
         mp2 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |  -4.620533   .6199512    -7.45   0.000     -5.84759   -3.393476
  transfact2 |  -.5335974   .6073354    -0.88   0.381    -1.735684    .6684895
       _cons |  -.0357884    .026238    -1.36   0.175    -.0877206    .0161439
------------------------------------------------------------------------------

. reg mp2 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.54
       Model |  .067489142         1  .067489142   Prob > F        =    0.4649
    Residual |   15.698008       125  .125584064   R-squared       =    0.0043
-------------+----------------------------------   Adj R-squared   =   -0.0037
       Total |  15.7654971       126  .125122993   Root MSE        =    .35438

------------------------------------------------------------------------------
         mp2 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact2 |  -.5335974   .7278871    -0.73   0.465    -1.974176    .9069815
       _cons |  -.0357884    .031446    -1.14   0.257    -.0980239    .0264472
------------------------------------------------------------------------------

. 
. reg mp3 transfact1

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =     13.94
       Model |  6.37671618         1  6.37671618   Prob > F        =    0.0003
    Residual |  57.1992434       125  .457593947   R-squared       =    0.1003
-------------+----------------------------------   Adj R-squared   =    0.0931
       Total |  63.5759596       126  .504571108   Root MSE        =    .67646

------------------------------------------------------------------------------
         mp3 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |   5.294491   1.418292     3.73   0.000     2.487514    8.101467
       _cons |   .0107809   .0600258     0.18   0.858    -.1080177    .1295795
------------------------------------------------------------------------------

. reg mp3 transfact1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(2, 124)       =      7.00
       Model |  6.44708193         2  3.22354097   Prob > F        =    0.0013
    Residual |  57.1288776       124  .460716755   R-squared       =    0.1014
-------------+----------------------------------   Adj R-squared   =    0.0869
       Total |  63.5759596       126  .504571108   Root MSE        =    .67876

------------------------------------------------------------------------------
         mp3 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |   5.294491   1.423124     3.72   0.000      2.47773    8.111251
  transfact2 |   .5448506   1.394164     0.39   0.697     -2.21459    3.304291
       _cons |   .0107809   .0602303     0.18   0.858    -.1084317    .1299936
------------------------------------------------------------------------------

. reg mp3 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.14
       Model |  .070365749         1  .070365749   Prob > F        =    0.7104
    Residual |  63.5055938       125  .508044751   R-squared       =    0.0011
-------------+----------------------------------   Adj R-squared   =   -0.0069
       Total |  63.5759596       126  .504571108   Root MSE        =    .71277

------------------------------------------------------------------------------
         mp3 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact2 |   .5448506   1.464022     0.37   0.710    -2.352632    3.442333
       _cons |   .0107809   .0632483     0.17   0.865    -.1143954    .1359572
------------------------------------------------------------------------------

. save "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2. 
> Results/1. Clean data/db_clean.dta", replace
file /Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2.
    Results/1. Clean data/db_clean.dta saved

. use "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/1. D
> atabase/GSS_IJCB_DataCode/gss3_data_feb012005.dta"

. use "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/1. D
> atabase/GSS_IJCB_DataCode/gss3_data_feb012005.dta"

. use "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/1. D
> atabase/GSS_IJCB_DataCode/gss3_data_feb012005.dta"

. use "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/1. D
> atabase/GSS_IJCB_DataCode/gss3_data_feb012005.dta"

. cls

. 
. import excel "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Pro
> ject/2. Results/1. Clean data/db_clean.xlsx", firstrow clear
(20 vars, 133 obs)

. drop date

. save "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2. 
> Results/1. Clean data/db_clean.dta", replace
file /Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2.
    Results/1. Clean data/db_clean.dta saved

. use "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2. R
> esults/1. Clean data/db_clean.dta", clear

. 
. *************************************************

. *  Do principal components on eleven variables  *

. *************************************************

. 
. pca ed1change change3m change6m change12m change3y change5y change10y sp
(obs=127)
(principal components; 8 components retained)

Component    Eigenvalue     Difference    Proportion    Cumulative
------------------------------------------------------------------
     1        3.23043         1.56330      0.4038         0.4038
     2        1.66713         0.50937      0.2084         0.6122
     3        1.15776         0.37223      0.1447         0.7569
     4        0.78553         0.20722      0.0982         0.8551
     5        0.57832         0.08266      0.0723         0.9274
     6        0.49566         0.41798      0.0620         0.9894
     7        0.07768         0.07020      0.0097         0.9991
     8        0.00748               .      0.0009         1.0000

               Eigenvectors
    Variable |      1          2          3          4          5          6
-------------+-----------------------------------------------------------------
   ed1change |  -0.17716   -0.13471    0.72858    0.23568    0.60181   -0.03706
    change3m |  -0.05430    0.61168    0.23420   -0.26917   -0.09932   -0.69667
    change6m |  -0.05421    0.62253    0.17798   -0.27214    0.05685    0.70684
   change12m |   0.19222    0.40319   -0.02805    0.86905   -0.15397    0.01909
    change3y |   0.53031    0.07826   -0.07406    0.01352    0.22553   -0.05629
    change5y |   0.54546   -0.00503    0.03394   -0.11859    0.18975    0.00052
   change10y |   0.53568   -0.03396    0.05226   -0.16469    0.15393   -0.00884
          sp |   0.24512   -0.22424    0.61032   -0.03642   -0.70033    0.10021

               Eigenvectors
    Variable |      7          8
-------------+---------------------
   ed1change |   0.01644    0.01662
    change3m |  -0.01447   -0.01317
    change6m |   0.02456    0.01778
   change12m |  -0.14141   -0.01975
    change3y |   0.74489    0.31319
    change5y |  -0.10317   -0.80037
   change10y |  -0.63121    0.50975
          sp |   0.12245    0.01798

. 
. * Keep the first two factors, f1 and f2

. score f1 f2
            (based on unrotated principal components)
            (6 scorings not used)

               Scoring coefficients
    Variable |      1          2
-------------+---------------------
   ed1change |  -0.17716   -0.13471
    change3m |  -0.05430    0.61168
    change6m |  -0.05421    0.62253
   change12m |   0.19222    0.40319
    change3y |   0.53031    0.07826
    change5y |   0.54546   -0.00503
   change10y |   0.53568   -0.03396
          sp |   0.24512   -0.22424

. 
. * Do the rotation

. 
. matrix evec = get(Ld)

. scalar a1=evec[1,1]/(evec[1,1]+evec[1,2])

. scalar a2=evec[1,2]/(evec[1,1]+evec[1,2])

. 
. sum f1

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f1 |        127   -4.63e-09     1.79734  -3.877177   16.17329

. scalar vf1=r(sd)^2

. sum f2

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f2 |        127    2.38e-09    1.291175  -2.876426     6.4816

. scalar vf2=r(sd)^2

. 
. scalar b1=-1*a2*vf2/(a1*vf1-a2*vf2)

. scalar b2=a1*vf1/(a1*vf1-a2*vf2)

. 
. 
. *Display weights

. 
. disp a1 a2 b1 b2
.56805852.43194148-.645850431.6458504

. 
. 
. *Generate rotated factors

. 
. gen transfact1=a1*f1+a2*f2
(6 missing values generated)

. gen transfact2=b1*f1+b2*f2
(6 missing values generated)

. 
. 
. *Normalize factors so that transfact1 has coefficient 1 on mp1 IN SAMPLE

. 
. reg mp1 transfact1

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.01
       Model |  .000090619         1  .000090619   Prob > F        =    0.9236
    Residual |  1.22826174       125  .009826094   R-squared       =    0.0001
-------------+----------------------------------   Adj R-squared   =   -0.0079
       Total |  1.22835236       126  .009748828   Root MSE        =    .09913

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |   -.000729   .0075907    -0.10   0.924    -.0157518    .0142939
       _cons |   .0005709   .0087961     0.06   0.948    -.0168376    .0179794
------------------------------------------------------------------------------

. replace transfact1=transfact1*_b[transfact1]
(127 real changes made)

. 
. * And transfact2 moves ndx as much as transfact1 does

. 
. reg change2yfut transfact1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(2, 124)       =     19.91
       Model |  .000023088         2  .000011544   Prob > F        =    0.0000
    Residual |  .000071884       124  5.7971e-07   R-squared       =    0.2431
-------------+----------------------------------   Adj R-squared   =    0.2309
       Total |  .000094971       126  7.5374e-07   Root MSE        =    .00076

------------------------------------------------------------------------------
 change2yfut | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |    .475236   .0799822     5.94   0.000     .3169288    .6335432
  transfact2 |   .0000596    .000028     2.13   0.035     4.12e-06     .000115
       _cons |  -6.78e-06   .0000676    -0.10   0.920    -.0001405    .0001269
------------------------------------------------------------------------------

. replace transfact2=transfact2*_b[transfact2]/_b[transfact1]
(127 real changes made)

. 
. *****************

. *  Regressions  * 

. *****************

. 
. 
. reg mp1 transfact1

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.01
       Model |  .000090619         1  .000090619   Prob > F        =    0.9236
    Residual |  1.22826174       125  .009826094   R-squared       =    0.0001
-------------+----------------------------------   Adj R-squared   =   -0.0079
       Total |  1.22835236       126  .009748828   Root MSE        =    .09913

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |          1    10.4131     0.10   0.924    -19.60882    21.60882
       _cons |   .0005709   .0087961     0.06   0.948    -.0168376    .0179794
------------------------------------------------------------------------------

. reg mp1 transfact1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(2, 124)       =      0.06
       Model |  .001151431         2  .000575715   Prob > F        =    0.9435
    Residual |  1.22720093       124  .009896782   R-squared       =    0.0009
-------------+----------------------------------   Adj R-squared   =   -0.0152
       Total |  1.22835236       126  .009748828   Root MSE        =    .09948

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |          1   10.45049     0.10   0.924    -19.68445    21.68445
  transfact2 |  -9.559915   29.19994    -0.33   0.744    -67.35477    48.23494
       _cons |   .0005709   .0088277     0.06   0.949    -.0169015    .0180433
------------------------------------------------------------------------------

. reg mp1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.11
       Model |  .001060811         1  .001060811   Prob > F        =    0.7429
    Residual |  1.22729155       125  .009818332   R-squared       =    0.0009
-------------+----------------------------------   Adj R-squared   =   -0.0071
       Total |  1.22835236       126  .009748828   Root MSE        =    .09909

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact2 |  -9.559915   29.08398    -0.33   0.743    -67.12072    48.00089
       _cons |   .0005709   .0087926     0.06   0.948    -.0168308    .0179725
------------------------------------------------------------------------------

. 
. reg mp2 transfact1

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.12
       Model |  .015291276         1  .015291276   Prob > F        =    0.7282
    Residual |  15.7502059       125  .126001647   R-squared       =    0.0010
-------------+----------------------------------   Adj R-squared   =   -0.0070
       Total |  15.7654971       126  .125122993   Root MSE        =    .35497

------------------------------------------------------------------------------
         mp2 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |   12.99007   37.28874     0.35   0.728    -60.80898    86.78912
       _cons |  -.0357884   .0314982    -1.14   0.258    -.0981273    .0265506
------------------------------------------------------------------------------

. reg mp2 transfact1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(2, 124)       =      0.43
       Model |  .109363515         2  .054681758   Prob > F        =    0.6495
    Residual |  15.6561336       124  .126259142   R-squared       =    0.0069
-------------+----------------------------------   Adj R-squared   =   -0.0091
       Total |  15.7654971       126  .125122993   Root MSE        =    .35533

------------------------------------------------------------------------------
         mp2 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |   12.99007   37.32683     0.35   0.728    -60.89017    86.87032
  transfact2 |   90.02553   104.2957     0.86   0.390    -116.4049    296.4559
       _cons |  -.0357884   .0315304    -1.14   0.259    -.0981959    .0266191
------------------------------------------------------------------------------

. reg mp2 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.75
       Model |  .094072237         1  .094072237   Prob > F        =    0.3880
    Residual |  15.6714249       125  .125371399   R-squared       =    0.0060
-------------+----------------------------------   Adj R-squared   =   -0.0020
       Total |  15.7654971       126  .125122993   Root MSE        =    .35408

------------------------------------------------------------------------------
         mp2 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact2 |   90.02553   103.9284     0.87   0.388    -115.6616    295.7127
       _cons |  -.0357884   .0314194    -1.14   0.257    -.0979712    .0263945
------------------------------------------------------------------------------

. 
. reg mp3 transfact1

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.07
       Model |  .036746304         1  .036746304   Prob > F        =    0.7885
    Residual |  63.5392133       125  .508313706   R-squared       =    0.0006
-------------+----------------------------------   Adj R-squared   =   -0.0074
       Total |  63.5759596       126  .504571108   Root MSE        =    .71296

------------------------------------------------------------------------------
         mp3 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |  -20.13708   74.89547    -0.27   0.788    -168.3645    128.0904
       _cons |   .0107809   .0632651     0.17   0.865    -.1144285    .1359904
------------------------------------------------------------------------------

. reg mp3 transfact1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(2, 124)       =      0.05
       Model |  .046294463         2  .023147231   Prob > F        =    0.9558
    Residual |  63.5296651       124  .512336009   R-squared       =    0.0007
-------------+----------------------------------   Adj R-squared   =   -0.0154
       Total |  63.5759596       126  .504571108   Root MSE        =    .71578

------------------------------------------------------------------------------
         mp3 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |  -20.13708   75.19121    -0.27   0.789    -168.9616    128.6874
  transfact2 |  -28.68103   210.0934    -0.14   0.892    -444.5147    387.1526
       _cons |   .0107809   .0635149     0.17   0.865    -.1149328    .1364947
------------------------------------------------------------------------------

. reg mp3 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.02
       Model |  .009548158         1  .009548158   Prob > F        =    0.8912
    Residual |  63.5664114       125  .508531291   R-squared       =    0.0002
-------------+----------------------------------   Adj R-squared   =   -0.0078
       Total |  63.5759596       126  .504571108   Root MSE        =    .71311

------------------------------------------------------------------------------
         mp3 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact2 |  -28.68103   209.3118    -0.14   0.891    -442.9351    385.5731
       _cons |   .0107809   .0632786     0.17   0.865    -.1144553    .1360172
------------------------------------------------------------------------------

. cls

. 
. import excel "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Pro
> ject/2. Results/1. Clean data/db_clean.xlsx", firstrow clear
(20 vars, 133 obs)

. drop date

. save "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2. 
> Results/1. Clean data/db_clean.dta", replace
file /Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2.
    Results/1. Clean data/db_clean.dta saved

. use "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2. R
> esults/1. Clean data/db_clean.dta", clear

. 
. *************************************************

. *  Do principal components on eleven variables  *

. *************************************************

. 
. pca ed1change_abs change3m_abs change6m_abs change12m_abs change3y_abs change5y_abs change10y_abs sp_abs
variable ed1change_abs not found
r(111);

. 
. * Keep the first two factors, f1 and f2

. score f1 f2
score is not valid after regress
r(301);

. 
. * Do the rotation

. 
. matrix evec = get(Ld)
matrix Ld not found
r(111);

. scalar a1=evec[1,1]/(evec[1,1]+evec[1,2])

. scalar a2=evec[1,2]/(evec[1,1]+evec[1,2])

. 
. sum f1
variable f1 not found
r(111);

. scalar vf1=r(sd)^2

. sum f2
variable f2 not found
r(111);

. scalar vf2=r(sd)^2

. 
. scalar b1=-1*a2*vf2/(a1*vf1-a2*vf2)

. scalar b2=a1*vf1/(a1*vf1-a2*vf2)

. 
. 
. *Display weights

. 
. disp a1 a2 b1 b2
.56805852.43194148..

. 
. 
. *Generate rotated factors

. 
. gen transfact1=a1*f1+a2*f2
f1 not found
r(111);

. gen transfact2=b1*f1+b2*f2
f1 not found
r(111);

. 
. 
. *Normalize factors so that transfact1 has coefficient 1 on mp1 IN SAMPLE

. 
. reg mp1 transfact1
variable transfact1 not found
r(111);

. replace transfact1=transfact1*_b[transfact1]
variable transfact1 not found
r(111);

. 
. * And transfact2 moves ndx as much as transfact1 does

. 
. reg change2yfut transfact1 transfact2
variable transfact1 not found
r(111);

. replace transfact2=transfact2*_b[transfact2]/_b[transfact1]
variable transfact2 not found
r(111);

. 
. *****************

. *  Regressions  * 

. *****************

. 
. 
. reg mp1 transfact1
variable transfact1 not found
r(111);

. reg mp1 transfact1 transfact2
variable transfact1 not found
r(111);

. reg mp1 transfact2
variable transfact2 not found
r(111);

. 
. reg mp2 transfact1
variable transfact1 not found
r(111);

. reg mp2 transfact1 transfact2
variable transfact1 not found
r(111);

. reg mp2 transfact2
variable transfact2 not found
r(111);

. 
. reg mp3 transfact1
variable transfact1 not found
r(111);

. reg mp3 transfact1 transfact2
variable transfact1 not found
r(111);

. reg mp3 transfact2
variable transfact2 not found
r(111);

. cls

. 
. import excel "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Pro
> ject/2. Results/1. Clean data/db_clean.xlsx", firstrow clear
(20 vars, 133 obs)

. drop date

. save "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2. 
> Results/1. Clean data/db_clean.dta", replace
file /Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2.
    Results/1. Clean data/db_clean.dta saved

. use "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2. R
> esults/1. Clean data/db_clean.dta", clear

. 
. *************************************************

. *  Do principal components on eleven variables  *

. *************************************************

. 
. pca ed1change_abs change3m_abs change6m_abs change12m_abs change3y_abs change5y_abs change10y_abs sp_abs
variable ed1change_abs not found
r(111);

. 
. * Keep the first two factors, f1 and f2

. score f1 f2
score is not valid after regress
r(301);

. 
. * Do the rotation

. 
. matrix evec = get(Ld)
matrix Ld not found
r(111);

. scalar a1=evec[1,1]/(evec[1,1]+evec[1,2])

. scalar a2=evec[1,2]/(evec[1,1]+evec[1,2])

. 
. sum f1
variable f1 not found
r(111);

. scalar vf1=r(sd)^2

. sum f2
variable f2 not found
r(111);

. scalar vf2=r(sd)^2

. 
. scalar b1=-1*a2*vf2/(a1*vf1-a2*vf2)

. scalar b2=a1*vf1/(a1*vf1-a2*vf2)

. 
. 
. *Display weights

. 
. disp a1 a2 b1 b2
.56805852.43194148..

. 
. 
. *Generate rotated factors

. 
. gen transfact1=a1*f1+a2*f2
f1 not found
r(111);

. gen transfact2=b1*f1+b2*f2
f1 not found
r(111);

. 
. 
. *Normalize factors so that transfact1 has coefficient 1 on mp1 IN SAMPLE

. 
. reg mp1 transfact1
variable transfact1 not found
r(111);

. replace transfact1=transfact1*_b[transfact1]
variable transfact1 not found
r(111);

. 
. * And transfact2 moves ndx as much as transfact1 does

. 
. reg change2yfut transfact1 transfact2
variable transfact1 not found
r(111);

. replace transfact2=transfact2*_b[transfact2]/_b[transfact1]
variable transfact2 not found
r(111);

. 
. *****************

. *  Regressions  * 

. *****************

. 
. 
. reg mp1 transfact1
variable transfact1 not found
r(111);

. reg mp1 transfact1 transfact2
variable transfact1 not found
r(111);

. reg mp1 transfact2
variable transfact2 not found
r(111);

. 
. reg mp2 transfact1
variable transfact1 not found
r(111);

. reg mp2 transfact1 transfact2
variable transfact1 not found
r(111);

. reg mp2 transfact2
variable transfact2 not found
r(111);

. 
. reg mp3 transfact1
variable transfact1 not found
r(111);

. reg mp3 transfact1 transfact2
variable transfact1 not found
r(111);

. reg mp3 transfact2
variable transfact2 not found
r(111);

. cls

. 
. import excel "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Pro
> ject/2. Results/1. Clean data/db_clean.xlsx", firstrow clear
(33 vars, 133 obs)

. drop date

. save "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2. 
> Results/1. Clean data/db_clean.dta", replace
file /Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2.
    Results/1. Clean data/db_clean.dta saved

. use "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2. R
> esults/1. Clean data/db_clean.dta", clear

. 
. *************************************************

. *  Do principal components on eleven variables  *

. *************************************************

. 
. pca ed1change_abs change3m_abs change6m_abs change12m_abs change3y_abs change5y_abs change10y_abs sp_abs
(obs=127)
(principal components; 8 components retained)

Component    Eigenvalue     Difference    Proportion    Cumulative
------------------------------------------------------------------
     1        3.57525         2.07707      0.4469         0.4469
     2        1.49818         0.45872      0.1873         0.6342
     3        1.03946         0.24496      0.1299         0.7641
     4        0.79450         0.10334      0.0993         0.8634
     5        0.69116         0.40689      0.0864         0.9498
     6        0.28427         0.19109      0.0355         0.9854
     7        0.09318         0.06918      0.0116         0.9970
     8        0.02400               .      0.0030         1.0000

               Eigenvectors
    Variable |      1          2          3          4          5          6
-------------+-----------------------------------------------------------------
ed1change_~s |  -0.11021   -0.03619    0.89234   -0.04714   -0.42081    0.09613
change3m_abs |   0.04295    0.57403    0.16736    0.73951    0.15364   -0.26366
change6m_abs |   0.28479    0.55996    0.08736   -0.27782    0.24202    0.67672
change12m_~s |   0.38914    0.28393    0.12191   -0.49533    0.01567   -0.64781
change3y_abs |   0.50266   -0.00763   -0.07268   -0.00698   -0.21234   -0.04489
change5y_abs |   0.49677   -0.16780   -0.02456    0.17931   -0.21698    0.05324
change10y_~s |   0.45845   -0.27094   -0.02747    0.30753   -0.17066    0.19091
      sp_abs |   0.20939   -0.41640    0.38287    0.03997    0.78689   -0.04837

               Eigenvectors
    Variable |      7          8
-------------+---------------------
ed1change_~s |  -0.03784    0.01749
change3m_abs |  -0.02491    0.00484
change6m_abs |   0.06021   -0.01940
change12m_~s |   0.29153    0.05339
change3y_abs |  -0.78478    0.28099
change5y_abs |   0.09105   -0.79630
change10y_~s |   0.52187    0.53213
      sp_abs |  -0.11318   -0.01503

. 
. * Keep the first two factors, f1 and f2

. score f1 f2
            (based on unrotated principal components)
            (6 scorings not used)

               Scoring coefficients
    Variable |      1          2
-------------+---------------------
ed1change_~s |  -0.11021   -0.03619
change3m_abs |   0.04295    0.57403
change6m_abs |   0.28479    0.55996
change12m_~s |   0.38914    0.28393
change3y_abs |   0.50266   -0.00763
change5y_abs |   0.49677   -0.16780
change10y_~s |   0.45845   -0.27094
      sp_abs |   0.20939   -0.41640

. 
. * Do the rotation

. 
. matrix evec = get(Ld)

. scalar a1=evec[1,1]/(evec[1,1]+evec[1,2])

. scalar a2=evec[1,2]/(evec[1,1]+evec[1,2])

. 
. sum f1

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f1 |        127    5.26e-09    1.890833  -7.759235   8.858572

. scalar vf1=r(sd)^2

. sum f2

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f2 |        127    1.36e-09    1.224003   -6.19948   5.268966

. scalar vf2=r(sd)^2

. 
. scalar b1=-1*a2*vf2/(a1*vf1-a2*vf2)

. scalar b2=a1*vf1/(a1*vf1-a2*vf2)

. 
. 
. *Display weights

. 
. disp a1 a2 b1 b2
.75281858.24718142-.159540071.1595401

. 
. 
. *Generate rotated factors

. 
. gen transfact1=a1*f1+a2*f2
(6 missing values generated)

. gen transfact2=b1*f1+b2*f2
(6 missing values generated)

. 
. 
. *Normalize factors so that transfact1 has coefficient 1 on mp1 IN SAMPLE

. 
. reg mp1 transfact1

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.23
       Model |  .002303442         1  .002303442   Prob > F        =    0.6288
    Residual |  1.22604892       125  .009808391   R-squared       =    0.0019
-------------+----------------------------------   Adj R-squared   =   -0.0061
       Total |  1.22835236       126  .009748828   Root MSE        =    .09904

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |   .0029381   .0060628     0.48   0.629     -.009061    .0149372
       _cons |   .0005709   .0087881     0.06   0.948     -.016822    .0179637
------------------------------------------------------------------------------

. replace transfact1=transfact1*_b[transfact1]
(127 real changes made)

. 
. * And transfact2 moves ndx as much as transfact1 does

. 
. reg change2yfut transfact1 transfact2
change2yfut ambiguous abbreviation
r(111);

. replace transfact2=transfact2*_b[transfact2]/_b[transfact1]
[transfact2] not found
r(111);

. 
. *****************

. *  Regressions  * 

. *****************

. 
. 
. reg mp1 transfact1

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.23
       Model |  .002303442         1  .002303442   Prob > F        =    0.6288
    Residual |  1.22604892       125  .009808391   R-squared       =    0.0019
-------------+----------------------------------   Adj R-squared   =   -0.0061
       Total |  1.22835236       126  .009748828   Root MSE        =    .09904

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |          1   2.063527     0.48   0.629    -3.083977    5.083977
       _cons |   .0005709   .0087881     0.06   0.948     -.016822    .0179637
------------------------------------------------------------------------------

. reg mp1 transfact1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(2, 124)       =      0.12
       Model |  .002326758         2  .001163379   Prob > F        =    0.8891
    Residual |   1.2260256       124  .009887303   R-squared       =    0.0019
-------------+----------------------------------   Adj R-squared   =   -0.0142
       Total |  1.22835236       126  .009748828   Root MSE        =    .09943

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |          1   2.071812     0.48   0.630    -3.100696    5.100696
  transfact2 |   .0002965   .0061051     0.05   0.961    -.0117872    .0123801
       _cons |   .0005709   .0088234     0.06   0.949    -.0168932    .0180349
------------------------------------------------------------------------------

. reg mp1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.00
       Model |  .000023316         1  .000023316   Prob > F        =    0.9612
    Residual |  1.22832905       125  .009826632   R-squared       =    0.0000
-------------+----------------------------------   Adj R-squared   =   -0.0080
       Total |  1.22835236       126  .009748828   Root MSE        =    .09913

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact2 |   .0002965   .0060863     0.05   0.961    -.0117491     .012342
       _cons |   .0005709   .0087963     0.06   0.948    -.0168381    .0179799
------------------------------------------------------------------------------

. 
. reg mp2 transfact1

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.04
       Model |  .004888209         1  .004888209   Prob > F        =    0.8442
    Residual |  15.7606089       125  .126084871   R-squared       =    0.0003
-------------+----------------------------------   Adj R-squared   =   -0.0077
       Total |  15.7654971       126  .125122993   Root MSE        =    .35508

------------------------------------------------------------------------------
         mp2 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |  -1.456754   7.398485    -0.20   0.844    -16.09927    13.18577
       _cons |  -.0357884   .0315086    -1.14   0.258    -.0981479    .0265711
------------------------------------------------------------------------------

. reg mp2 transfact1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(2, 124)       =      0.38
       Model |  .095664157         2  .047832078   Prob > F        =    0.6857
    Residual |   15.669833       124  .126369621   R-squared       =    0.0061
-------------+----------------------------------   Adj R-squared   =   -0.0100
       Total |  15.7654971       126  .125122993   Root MSE        =    .35549

------------------------------------------------------------------------------
         mp2 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |  -1.456754   7.406835    -0.20   0.844    -16.11696    13.20345
  transfact2 |   .0184985   .0218259     0.85   0.398    -.0247011    .0616982
       _cons |  -.0357884   .0315442    -1.13   0.259    -.0982232    .0266464
------------------------------------------------------------------------------

. reg mp2 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.72
       Model |  .090775948         1  .090775948   Prob > F        =    0.3965
    Residual |  15.6747212       125   .12539777   R-squared       =    0.0058
-------------+----------------------------------   Adj R-squared   =   -0.0022
       Total |  15.7654971       126  .125122993   Root MSE        =    .35412

------------------------------------------------------------------------------
         mp2 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact2 |   .0184985   .0217419     0.85   0.396    -.0245313    .0615284
       _cons |  -.0357884   .0314227    -1.14   0.257    -.0979777     .026401
------------------------------------------------------------------------------

. 
. reg mp3 transfact1

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.49
       Model |  .248776078         1  .248776078   Prob > F        =    0.4848
    Residual |  63.3271835       125  .506617468   R-squared       =    0.0039
-------------+----------------------------------   Adj R-squared   =   -0.0041
       Total |  63.5759596       126  .504571108   Root MSE        =    .71177

------------------------------------------------------------------------------
         mp3 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |  -10.39239   14.83035    -0.70   0.485     -39.7435    18.95871
       _cons |   .0107809   .0631594     0.17   0.865    -.1142194    .1357813
------------------------------------------------------------------------------

. reg mp3 transfact1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(2, 124)       =      0.24
       Model |  .248830594         2  .124415297   Prob > F        =    0.7842
    Residual |   63.327129       124  .510702653   R-squared       =    0.0039
-------------+----------------------------------   Adj R-squared   =   -0.0122
       Total |  63.5759596       126  .504571108   Root MSE        =    .71463

------------------------------------------------------------------------------
         mp3 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |  -10.39239   14.89002    -0.70   0.487    -39.86392    19.07913
  transfact2 |   .0004533   .0438769     0.01   0.992    -.0863913     .087298
       _cons |   .0107809   .0634136     0.17   0.865    -.1147323    .1362941
------------------------------------------------------------------------------

. reg mp3 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.00
       Model |  .000054516         1  .000054516   Prob > F        =    0.9918
    Residual |  63.5759051       125   .50860724   R-squared       =    0.0000
-------------+----------------------------------   Adj R-squared   =   -0.0080
       Total |  63.5759596       126  .504571108   Root MSE        =    .71317

------------------------------------------------------------------------------
         mp3 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact2 |   .0004533   .0437868     0.01   0.992    -.0862061    .0871128
       _cons |   .0107809   .0632833     0.17   0.865    -.1144647    .1360265
------------------------------------------------------------------------------

. cls

. 
. import excel "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Pro
> ject/2. Results/1. Clean data/db_clean.xlsx", firstrow clear
(33 vars, 133 obs)

. drop date

. save "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2. 
> Results/1. Clean data/db_clean.dta", replace
file /Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2.
    Results/1. Clean data/db_clean.dta saved

. use "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2. R
> esults/1. Clean data/db_clean.dta", clear

. 
. *************************************************

. *  Do principal components on eleven variables  *

. *************************************************

. 
. pca ed1change_abs change3m_abs change6m_abs change12m_abs change3y_abs change5y_abs change10y_abs sp_abs
(obs=127)
(principal components; 8 components retained)

Component    Eigenvalue     Difference    Proportion    Cumulative
------------------------------------------------------------------
     1        3.57525         2.07707      0.4469         0.4469
     2        1.49818         0.45872      0.1873         0.6342
     3        1.03946         0.24496      0.1299         0.7641
     4        0.79450         0.10334      0.0993         0.8634
     5        0.69116         0.40689      0.0864         0.9498
     6        0.28427         0.19109      0.0355         0.9854
     7        0.09318         0.06918      0.0116         0.9970
     8        0.02400               .      0.0030         1.0000

               Eigenvectors
    Variable |      1          2          3          4          5          6
-------------+-----------------------------------------------------------------
ed1change_~s |  -0.11021   -0.03619    0.89234   -0.04714   -0.42081    0.09613
change3m_abs |   0.04295    0.57403    0.16736    0.73951    0.15364   -0.26366
change6m_abs |   0.28479    0.55996    0.08736   -0.27782    0.24202    0.67672
change12m_~s |   0.38914    0.28393    0.12191   -0.49533    0.01567   -0.64781
change3y_abs |   0.50266   -0.00763   -0.07268   -0.00698   -0.21234   -0.04489
change5y_abs |   0.49677   -0.16780   -0.02456    0.17931   -0.21698    0.05324
change10y_~s |   0.45845   -0.27094   -0.02747    0.30753   -0.17066    0.19091
      sp_abs |   0.20939   -0.41640    0.38287    0.03997    0.78689   -0.04837

               Eigenvectors
    Variable |      7          8
-------------+---------------------
ed1change_~s |  -0.03784    0.01749
change3m_abs |  -0.02491    0.00484
change6m_abs |   0.06021   -0.01940
change12m_~s |   0.29153    0.05339
change3y_abs |  -0.78478    0.28099
change5y_abs |   0.09105   -0.79630
change10y_~s |   0.52187    0.53213
      sp_abs |  -0.11318   -0.01503

. 
. * Keep the first two factors, f1 and f2

. score f1 f2
            (based on unrotated principal components)
            (6 scorings not used)

               Scoring coefficients
    Variable |      1          2
-------------+---------------------
ed1change_~s |  -0.11021   -0.03619
change3m_abs |   0.04295    0.57403
change6m_abs |   0.28479    0.55996
change12m_~s |   0.38914    0.28393
change3y_abs |   0.50266   -0.00763
change5y_abs |   0.49677   -0.16780
change10y_~s |   0.45845   -0.27094
      sp_abs |   0.20939   -0.41640

. 
. * Do the rotation

. 
. matrix evec = get(Ld)

. scalar a1=evec[1,1]/(evec[1,1]+evec[1,2])

. scalar a2=evec[1,2]/(evec[1,1]+evec[1,2])

. 
. sum f1

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f1 |        127    5.26e-09    1.890833  -7.759235   8.858572

. scalar vf1=r(sd)^2

. sum f2

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f2 |        127    1.36e-09    1.224003   -6.19948   5.268966

. scalar vf2=r(sd)^2

. 
. scalar b1=-1*a2*vf2/(a1*vf1-a2*vf2)

. scalar b2=a1*vf1/(a1*vf1-a2*vf2)

. 
. 
. *Display weights

. 
. disp a1 a2 b1 b2
.75281858.24718142-.159540071.1595401

. 
. 
. *Generate rotated factors

. 
. gen transfact1=a1*f1+a2*f2
(6 missing values generated)

. gen transfact2=b1*f1+b2*f2
(6 missing values generated)

. 
. 
. *Normalize factors so that transfact1 has coefficient 1 on mp1 IN SAMPLE

. 
. reg mp1 transfact1

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.23
       Model |  .002303442         1  .002303442   Prob > F        =    0.6288
    Residual |  1.22604892       125  .009808391   R-squared       =    0.0019
-------------+----------------------------------   Adj R-squared   =   -0.0061
       Total |  1.22835236       126  .009748828   Root MSE        =    .09904

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |   .0029381   .0060628     0.48   0.629     -.009061    .0149372
       _cons |   .0005709   .0087881     0.06   0.948     -.016822    .0179637
------------------------------------------------------------------------------

. replace transfact1=transfact1*_b[transfact1]
(127 real changes made)

. 
. * And transfact2 moves ndx as much as transfact1 does

. 
. reg change2yfut_abs transfact1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(2, 124)       =    195.21
       Model |  .796963031         2  .398481515   Prob > F        =    0.0000
    Residual |  .253123283       124  .002041317   R-squared       =    0.7590
-------------+----------------------------------   Adj R-squared   =    0.7551
       Total |  1.05008631       126  .008334018   Root MSE        =    .04518

------------------------------------------------------------------------------
change2yfu~s | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |  -18.50196   .9413834   -19.65   0.000    -20.36522    -16.6387
  transfact2 |   .0056415    .002774     2.03   0.044      .000151     .011132
       _cons |  -.0004306   .0040092    -0.11   0.915    -.0083659    .0075046
------------------------------------------------------------------------------

. replace transfact2=transfact2*_b[transfact2]/_b[transfact1]
(127 real changes made)

. 
. *****************

. *  Regressions  * 

. *****************

. 
. 
. reg mp1_abs transfact1
variable mp1_abs not found
r(111);

. reg mp1_abs transfact1 transfact2
variable mp1_abs not found
r(111);

. reg mp1_abs transfact2
variable mp1_abs not found
r(111);

. 
. reg mp2_abs transfact1
variable mp2_abs not found
r(111);

. reg mp2_abs transfact1 transfact2
variable mp2_abs not found
r(111);

. reg mp2_abs transfact2
variable mp2_abs not found
r(111);

. 
. reg mp3_abs transfact1
variable mp3_abs not found
r(111);

. reg mp3_abs transfact1 transfact2
variable mp3_abs not found
r(111);

. reg mp3_abs transfact2
variable mp3_abs not found
r(111);

. cls

. 
. import excel "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Pro
> ject/2. Results/1. Clean data/db_clean.xlsx", firstrow clear
(33 vars, 133 obs)

. drop date

. save "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2. 
> Results/1. Clean data/db_clean.dta", replace
file /Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2.
    Results/1. Clean data/db_clean.dta saved

. use "/Users/eytanrozenblum/Desktop/1. Academic/Bac+3-Bac+5/2. Polytechnique/1. M2/2. S2/Econometrics Project/2. R
> esults/1. Clean data/db_clean.dta", clear

. 
. *************************************************

. *  Do principal components on eleven variables  *

. *************************************************

. 
. pca ed1change_abs change3m_abs change6m_abs change12m_abs change3y_abs change5y_abs change10y_abs sp_abs
(obs=127)
(principal components; 8 components retained)

Component    Eigenvalue     Difference    Proportion    Cumulative
------------------------------------------------------------------
     1        3.57525         2.07707      0.4469         0.4469
     2        1.49818         0.45872      0.1873         0.6342
     3        1.03946         0.24496      0.1299         0.7641
     4        0.79450         0.10334      0.0993         0.8634
     5        0.69116         0.40689      0.0864         0.9498
     6        0.28427         0.19109      0.0355         0.9854
     7        0.09318         0.06918      0.0116         0.9970
     8        0.02400               .      0.0030         1.0000

               Eigenvectors
    Variable |      1          2          3          4          5          6
-------------+-----------------------------------------------------------------
ed1change_~s |  -0.11021   -0.03619    0.89234   -0.04714   -0.42081    0.09613
change3m_abs |   0.04295    0.57403    0.16736    0.73951    0.15364   -0.26366
change6m_abs |   0.28479    0.55996    0.08736   -0.27782    0.24202    0.67672
change12m_~s |   0.38914    0.28393    0.12191   -0.49533    0.01567   -0.64781
change3y_abs |   0.50266   -0.00763   -0.07268   -0.00698   -0.21234   -0.04489
change5y_abs |   0.49677   -0.16780   -0.02456    0.17931   -0.21698    0.05324
change10y_~s |   0.45845   -0.27094   -0.02747    0.30753   -0.17066    0.19091
      sp_abs |   0.20939   -0.41640    0.38287    0.03997    0.78689   -0.04837

               Eigenvectors
    Variable |      7          8
-------------+---------------------
ed1change_~s |  -0.03784    0.01749
change3m_abs |  -0.02491    0.00484
change6m_abs |   0.06021   -0.01940
change12m_~s |   0.29153    0.05339
change3y_abs |  -0.78478    0.28099
change5y_abs |   0.09105   -0.79630
change10y_~s |   0.52187    0.53213
      sp_abs |  -0.11318   -0.01503

. 
. * Keep the first two factors, f1 and f2

. score f1 f2
            (based on unrotated principal components)
            (6 scorings not used)

               Scoring coefficients
    Variable |      1          2
-------------+---------------------
ed1change_~s |  -0.11021   -0.03619
change3m_abs |   0.04295    0.57403
change6m_abs |   0.28479    0.55996
change12m_~s |   0.38914    0.28393
change3y_abs |   0.50266   -0.00763
change5y_abs |   0.49677   -0.16780
change10y_~s |   0.45845   -0.27094
      sp_abs |   0.20939   -0.41640

. 
. * Do the rotation

. 
. matrix evec = get(Ld)

. scalar a1=evec[1,1]/(evec[1,1]+evec[1,2])

. scalar a2=evec[1,2]/(evec[1,1]+evec[1,2])

. 
. sum f1

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f1 |        127    5.26e-09    1.890833  -7.759235   8.858572

. scalar vf1=r(sd)^2

. sum f2

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
          f2 |        127    1.36e-09    1.224003   -6.19948   5.268966

. scalar vf2=r(sd)^2

. 
. scalar b1=-1*a2*vf2/(a1*vf1-a2*vf2)

. scalar b2=a1*vf1/(a1*vf1-a2*vf2)

. 
. 
. *Display weights

. 
. disp a1 a2 b1 b2
.75281858.24718142-.159540071.1595401

. 
. 
. *Generate rotated factors

. 
. gen transfact1=a1*f1+a2*f2
(6 missing values generated)

. gen transfact2=b1*f1+b2*f2
(6 missing values generated)

. 
. 
. *Normalize factors so that transfact1 has coefficient 1 on mp1 IN SAMPLE

. 
. reg mp1 transfact1

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.23
       Model |  .002303442         1  .002303442   Prob > F        =    0.6288
    Residual |  1.22604892       125  .009808391   R-squared       =    0.0019
-------------+----------------------------------   Adj R-squared   =   -0.0061
       Total |  1.22835236       126  .009748828   Root MSE        =    .09904

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |   .0029381   .0060628     0.48   0.629     -.009061    .0149372
       _cons |   .0005709   .0087881     0.06   0.948     -.016822    .0179637
------------------------------------------------------------------------------

. replace transfact1=transfact1*_b[transfact1]
(127 real changes made)

. 
. * And transfact2 moves ndx as much as transfact1 does

. 
. reg change2yfut_abs transfact1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(2, 124)       =    195.21
       Model |  .796963031         2  .398481515   Prob > F        =    0.0000
    Residual |  .253123283       124  .002041317   R-squared       =    0.7590
-------------+----------------------------------   Adj R-squared   =    0.7551
       Total |  1.05008631       126  .008334018   Root MSE        =    .04518

------------------------------------------------------------------------------
change2yfu~s | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |  -18.50196   .9413834   -19.65   0.000    -20.36522    -16.6387
  transfact2 |   .0056415    .002774     2.03   0.044      .000151     .011132
       _cons |  -.0004306   .0040092    -0.11   0.915    -.0083659    .0075046
------------------------------------------------------------------------------

. replace transfact2=transfact2*_b[transfact2]/_b[transfact1]
(127 real changes made)

. 
. *****************

. *  Regressions  * 

. *****************

. 
. 
. reg mp1 transfact1

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.23
       Model |  .002303442         1  .002303442   Prob > F        =    0.6288
    Residual |  1.22604892       125  .009808391   R-squared       =    0.0019
-------------+----------------------------------   Adj R-squared   =   -0.0061
       Total |  1.22835236       126  .009748828   Root MSE        =    .09904

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |          1   2.063527     0.48   0.629    -3.083977    5.083977
       _cons |   .0005709   .0087881     0.06   0.948     -.016822    .0179637
------------------------------------------------------------------------------

. reg mp1 transfact1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(2, 124)       =      0.12
       Model |  .002326758         2  .001163379   Prob > F        =    0.8891
    Residual |   1.2260256       124  .009887303   R-squared       =    0.0019
-------------+----------------------------------   Adj R-squared   =   -0.0142
       Total |  1.22835236       126  .009748828   Root MSE        =    .09943

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |          1   2.071812     0.48   0.630    -3.100696    5.100696
  transfact2 |  -.9723057   20.02223    -0.05   0.961    -40.60192     38.6573
       _cons |   .0005709   .0088234     0.06   0.949    -.0168932    .0180349
------------------------------------------------------------------------------

. reg mp1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.00
       Model |  .000023316         1  .000023316   Prob > F        =    0.9612
    Residual |  1.22832905       125  .009826632   R-squared       =    0.0000
-------------+----------------------------------   Adj R-squared   =   -0.0080
       Total |  1.22835236       126  .009748828   Root MSE        =    .09913

------------------------------------------------------------------------------
         mp1 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact2 |  -.9723057   19.96071    -0.05   0.961    -40.47703    38.53241
       _cons |   .0005709   .0087963     0.06   0.948    -.0168381    .0179799
------------------------------------------------------------------------------

. 
. reg mp2 transfact1

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.04
       Model |  .004888209         1  .004888209   Prob > F        =    0.8442
    Residual |  15.7606089       125  .126084871   R-squared       =    0.0003
-------------+----------------------------------   Adj R-squared   =   -0.0077
       Total |  15.7654971       126  .125122993   Root MSE        =    .35508

------------------------------------------------------------------------------
         mp2 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |  -1.456754   7.398485    -0.20   0.844    -16.09927    13.18577
       _cons |  -.0357884   .0315086    -1.14   0.258    -.0981479    .0265711
------------------------------------------------------------------------------

. reg mp2 transfact1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(2, 124)       =      0.38
       Model |  .095664155         2  .047832077   Prob > F        =    0.6857
    Residual |   15.669833       124  .126369621   R-squared       =    0.0061
-------------+----------------------------------   Adj R-squared   =   -0.0100
       Total |  15.7654971       126  .125122993   Root MSE        =    .35549

------------------------------------------------------------------------------
         mp2 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |  -1.456754   7.406835    -0.20   0.844    -16.11696    13.20345
  transfact2 |  -60.66791   71.58054    -0.85   0.398    -202.3458    81.01003
       _cons |  -.0357884   .0315442    -1.13   0.259    -.0982232    .0266464
------------------------------------------------------------------------------

. reg mp2 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.72
       Model |  .090775946         1  .090775946   Prob > F        =    0.3965
    Residual |  15.6747212       125   .12539777   R-squared       =    0.0058
-------------+----------------------------------   Adj R-squared   =   -0.0022
       Total |  15.7654971       126  .125122993   Root MSE        =    .35412

------------------------------------------------------------------------------
         mp2 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact2 |  -60.66791   71.30476    -0.85   0.396    -201.7889    80.45306
       _cons |  -.0357884   .0314227    -1.14   0.257    -.0979777     .026401
------------------------------------------------------------------------------

. 
. reg mp3 transfact1

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.49
       Model |  .248776078         1  .248776078   Prob > F        =    0.4848
    Residual |  63.3271835       125  .506617468   R-squared       =    0.0039
-------------+----------------------------------   Adj R-squared   =   -0.0041
       Total |  63.5759596       126  .504571108   Root MSE        =    .71177

------------------------------------------------------------------------------
         mp3 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |  -10.39239   14.83035    -0.70   0.485     -39.7435    18.95871
       _cons |   .0107809   .0631594     0.17   0.865    -.1142194    .1357813
------------------------------------------------------------------------------

. reg mp3 transfact1 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(2, 124)       =      0.24
       Model |  .248830594         2  .124415297   Prob > F        =    0.7842
    Residual |   63.327129       124  .510702653   R-squared       =    0.0039
-------------+----------------------------------   Adj R-squared   =   -0.0122
       Total |  63.5759596       126  .504571108   Root MSE        =    .71463

------------------------------------------------------------------------------
         mp3 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact1 |  -10.39239   14.89002    -0.70   0.487    -39.86392    19.07913
  transfact2 |  -1.486743    143.899    -0.01   0.992    -286.3031    283.3296
       _cons |   .0107809   .0634136     0.17   0.865    -.1147323    .1362941
------------------------------------------------------------------------------

. reg mp3 transfact2

      Source |       SS           df       MS      Number of obs   =       127
-------------+----------------------------------   F(1, 125)       =      0.00
       Model |  .000054516         1  .000054516   Prob > F        =    0.9918
    Residual |  63.5759051       125   .50860724   R-squared       =    0.0000
-------------+----------------------------------   Adj R-squared   =   -0.0080
       Total |  63.5759596       126  .504571108   Root MSE        =    .71317

------------------------------------------------------------------------------
         mp3 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
  transfact2 |  -1.486743   143.6035    -0.01   0.992    -285.6958    282.7223
       _cons |   .0107809   .0632833     0.17   0.865    -.1144647    .1360265
------------------------------------------------------------------------------

